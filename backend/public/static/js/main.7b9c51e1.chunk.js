(this.webpackJsonpfunday=this.webpackJsonpfunday||[]).push([[0],{396:function(e,t){},397:function(e,t,a){},398:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(2),s=a.n(c),r=a(53),o=a.n(r),i=a(8),l=a(47),d=a(34),u=a(130),b=a(3),j=null;sessionStorage.user&&(j=JSON.parse(sessionStorage.user));var p={loggedInUser:j,users:[]};var m={isLoading:!1},f=a(11),O={workspaces:[],currWorkspace:{},boards:[],currBoard:{},checkedTasks:[],boardWorkspace:{},conversationLocation:{}};var h={board:{},statusLabelList:[],lastSeen:"177452dcf160.31ce41e0732050000000000000009"};var v=Object(d.c)({system:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(b.a)(Object(b.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(b.a)(Object(b.a)({},e),{},{isLoading:!1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":return Object(b.a)(Object(b.a)({},e),{},{loggedInUser:t.user});case"USER_REMOVE":return Object(b.a)(Object(b.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"SET_USERS":return Object(b.a)(Object(b.a)({},e),{},{users:t.users});case"UPDATE_USER":case"ADD_FAV_BOARD":case"REMOVE_FAV_BOARD":return Object(b.a)(Object(b.a)({},e),{},{loggedInUser:t.user});default:return e}},workspace:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_WORKSPACES":return Object(b.a)(Object(b.a)({},e),{},{workspaces:t.workspaces});case"UPDATE_CURR_WORKSPACE":return Object(b.a)(Object(b.a)({},e),{},{currWorkspace:t.workspace});case"UPDATE_BOARD_WORKSPACE":return Object(b.a)(Object(b.a)({},e),{},{boardWorkspace:t.workspace});case"ADD_WORKSPACE":var a=[].concat(Object(f.a)(e.workspaces),[t.workspace]);return Object(b.a)(Object(b.a)({},e),{},{workspaces:a,currWorkspace:t.workspace});case"REMOVE_WORKSPACE":return Object(b.a)(Object(b.a)({},e),{},{workspaces:e.workspaces.filter((function(e){return e._id!==t.workspaceId}))});case"UPDATE_WORKSPACE":return Object(b.a)(Object(b.a)({},e),{},{workspaces:e.workspaces.map((function(e){return e._id===t.workspace._id?t.workspace:e}))});case"UPDATE_BOARDS":return Object(b.a)(Object(b.a)({},e),{},{boards:e.currWorkspace.baords.map((function(e){return e._id===t.newBoard._id?t.newBoard:e}))});case"ADD_BOARDS":return Object(b.a)(Object(b.a)({},e),{},{boards:[].concat(Object(f.a)(e.currWorkspace.baords),[t.newBoard])});case"REMOVE_BOARDS":return Object(b.a)(Object(b.a)({},e),{},{boards:e.currWorkspace.baords.filter((function(e){return e._id!==t.newBoard._id}))});case"UPDATE_BOARD":case"SET_BOARD":return Object(b.a)(Object(b.a)({},e),{},{currBoard:t.board});case"ADD_CHECKED_TASK":return Object(b.a)(Object(b.a)({},e),{},{checkedTasks:[].concat(Object(f.a)(e.checkedTasks),[t.currCheckedTask])});case"REMOVE_CHECKED_TASK":return Object(b.a)(Object(b.a)({},e),{},{checkedTasks:e.checkedTasks.filter((function(e){return e._id!==t.taskId}))});case"UPDATE_TASK_CONVERSATION":return Object(b.a)(Object(b.a)({},e),{},{conversationLocation:t.location});default:return e}},board:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARD":return Object(b.a)(Object(b.a)({},e),{},{board:t.board});case"SET_LAST_SEEN_BOARD":return Object(b.a)(Object(b.a)({},e),{},{lastSeen:t.baordId});case"SET_STATUS_LABLE_LIST":return Object(b.a)(Object(b.a)({},e),{},{statusLabelList:t.statusLabelList});case"ADD_STATUS_LABLE_LIST":var a=[].concat(Object(f.a)(e.statusLabelList),[t.newLabel]);return Object(b.a)(Object(b.a)({},e),{},{statusLabelList:a});case"UPDATE_STATUS_LABLE_LIST":return Object(b.a)(Object(b.a)({},e),{},{statusLabelList:e.statusLabelList.map((function(e){return e._id===t.label._id?t.label:e}))});case"REMOVE_STATUS_LABLE_LIST":return Object(b.a)(Object(b.a)({},e),{},{statusLabelList:e.statusLabelList.filter((function(e){return e._id!==t.labelId}))});default:return e}}}),g=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.d,x=Object(d.e)(v,g(Object(d.a)(u.a))),k=a(19),w=a(7),N=a.n(w),C=a(10),S=a(15),y=a(16),B=a(18),T=a(17),_=a(131),E="/api/",L=a.n(_).a.create({withCredentials:!0}),A=function(e,t){return W(e,"GET",t)},F=function(e,t){return W(e,"POST",t)},D=function(e,t){return W(e,"PUT",t)},I=function(e,t){return W(e,"DELETE",t)};function W(e){return U.apply(this,arguments)}function U(){return(U=Object(C.a)(N.a.mark((function e(t){var a,n,c,s=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:"get",n=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=2,e.next=5,L({url:"".concat(E).concat(t),method:a,data:n});case 5:return c=e.sent,e.abrupt("return",c.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&e.t0.response.status,e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var M={login:P,logout:function(){return V.apply(this,arguments)},signup:function(e){return K.apply(this,arguments)},getUsers:function(){return A("user")},getById:function(e){return A("user/".concat(e))},remove:function(e){return I("user/".concat(e))},update:function(e){return R.apply(this,arguments)},removeFavBoard:function(e,t){return X.apply(this,arguments)},addFavBoard:function(e,t){return q.apply(this,arguments)},loginByGoogle:function(e){return H.apply(this,arguments)},guestLogin:function(){return J.apply(this,arguments)}};function R(){return(R=Object(C.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("user/".concat(t._id),t);case 2:return a=e.sent,e.abrupt("return",z(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return G.apply(this,arguments)}function G(){return(G=Object(C.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("auth/login",t);case 2:if(!(a=e.sent)){e.next=5;break}return e.abrupt("return",z(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(C.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("auth/signup",t);case 2:return a=e.sent,e.abrupt("return",z(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(C.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(C.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("auth/loginByGoogle",t);case 2:return a=e.sent,e.abrupt("return",z(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}function J(){return(J=Object(C.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P({email:"guest@gmail.com",password:"12345"});case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),console.log("userService: Couldn't login as guest"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function q(){return(q=Object(C.a)(N.a.mark((function e(t,a){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.favBoards=[a].concat(Object(f.a)(t.favBoards)),e.next=3,D("user/".concat(t._id),t);case 3:return n=e.sent,e.abrupt("return",z(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(C.a)(N.a.mark((function e(t,a){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.favBoards=t.favBoards.filter((function(e){return e!==a})),e.next=3,D("user/".concat(t._id),t);case 3:return n=e.sent,e.abrupt("return",z(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return function(){var e=Object(C.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_START"}),e.next=4,M.getUsers();case 4:a=e.sent,t({type:"SET_USERS",users:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("UserActions: err in loadUsers",e.t0);case 11:return e.prev=11,t({type:"LOADING_DONE"}),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()}function Z(){return function(){var e=Object(C.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.logout();case 2:t({type:"SET_USER",user:null});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function Y(){return function(){var e=Object(C.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.guestLogin();case 3:a=e.sent,t({type:"SET_USER",user:a}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log("userActions: Couldn't login as a guest"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function $(e){return function(){var t=Object(C.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.update(e);case 2:n=t.sent,a({type:"UPDATE_USER",user:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function ee(e,t){return e.favBoards.filter((function(e){return e===t})).length>0?function(){var a=Object(C.a)(N.a.mark((function a(n){var c;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,M.removeFavBoard(e,t);case 3:c=a.sent,n({type:"REMOVE_FAV_BOARD",user:c}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("UserActions: err in removeFavoriteBoard",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}():function(){var a=Object(C.a)(N.a.mark((function a(n){var c;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,M.addFavBoard(e,t);case 3:c=a.sent,n({type:"ADD_FAV_BOARD",user:c}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("UserActions: err in addFavoriteBoard",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}var te=a(58),ae=a(132),ne=a.n(ae),ce=a(133),se=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).responseGoogle=function(t){var a={email:t.profileObj.email,avatar:t.profileObj.imageUrl,username:t.profileObj.givenName};e.props.loginByGoogle(a),e.props.closeModal(),window.location.assign("/#/boards/")},e}return Object(y.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{children:Object(n.jsx)(ce.GoogleLogin,{clientId:"866960241942-jhfvtsh6b7adl5jae5cth72jlhug4i72.apps.googleusercontent.com",buttonText:"Login With Google",onSuccess:this.responseGoogle,onFailure:this.responseGoogle,cookiePolicy:"single_host_origin"})})}}]),a}(c.Component),re={loginByGoogle:function(e){return function(){var t=Object(C.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.loginByGoogle(e);case 2:n=t.sent,a({type:"SET_USER",user:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},oe=Object(i.b)((function(e){return{users:e.user.users,loggedInUser:e.user.loggedInUser,isLoading:e.system.isLoading}}),re)(se),ie=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={msg:"",loginCred:{email:"",password:""},signupCred:{email:"",password:"",username:""},section:!0},e.loginHandleChange=function(t){var a=t.target,n=a.name,c=a.value;e.setState((function(e){return{loginCred:Object(b.a)(Object(b.a)({},e.loginCred),{},Object(te.a)({},n,c))}}))},e.signupHandleChange=function(t){var a=t.target,n=a.name,c=a.value;e.setState((function(e){return{signupCred:Object(b.a)(Object(b.a)({},e.signupCred),{},Object(te.a)({},n,c))}}))},e.doLogin=function(){var t=Object(C.a)(N.a.mark((function t(a){var n,c,s,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state.loginCred,c=n.email,s=n.password,c&&s){t.next=4;break}return t.abrupt("return",e.setState({msg:"Please enter user/password"}));case 4:r={email:c,password:s},e.props.login(r).then((function(t){if(!t)return e.setState({msg:"Invalid email or password"});e.setState({loginCred:{email:"",password:""}}),e.props.closeModal(),window.location.assign("/#/boards/")}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.doSignup=function(){var t=Object(C.a)(N.a.mark((function t(a){var n,c,s,r,o;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state.signupCred,c=n.email,s=n.password,r=n.username,c&&s&&r){t.next=4;break}return t.abrupt("return",e.setState({msg:"All inputs are required!"}));case 4:o={email:c,password:s,username:r},e.props.signup(o),e.setState({signupCred:{email:"",password:"",username:""}}),e.props.closeModal(),window.location.assign("/#/boards/");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeUser=function(t){e.props.removeUser(t)},e.onSignup=function(){e.setState({section:!e.state.section})},e}return Object(y.a)(a,[{key:"render",value:function(){var e=Object(n.jsxs)("form",{onSubmit:this.doSignup,className:"signup-container",children:[Object(n.jsx)("input",{className:"login-input",type:"text",name:"email",value:this.state.signupCred.email,onChange:this.signupHandleChange,placeholder:"Email"}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{className:"login-input",name:"password",type:"password",value:this.state.signupCred.password,onChange:this.signupHandleChange,placeholder:"Password"}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{className:"login-input",type:"text",name:"username",value:this.state.signupCred.username,onChange:this.signupHandleChange,placeholder:"Username",maxLength:"10"}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{className:"login-btn",children:"Signup"})]}),t=Object(n.jsxs)("form",{onSubmit:this.doLogin,className:"login-container",children:[Object(n.jsx)("input",{className:"login-input",type:"text",name:"email",value:this.state.loginCred.email,onChange:this.loginHandleChange,placeholder:"Email"}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{className:"login-input",type:"password",name:"password",value:this.state.loginCred.password,onChange:this.loginHandleChange,placeholder:"Password"}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{className:"login-btn",children:"Login"})]}),a=this.props.loggedInUser;return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(ne.a,{canvasClassName:"example",params:{particles:{number:{value:160,density:{enable:!1}},size:{value:3,random:!0,anim:{speed:4,size_min:.3}},line_linked:{enable:!1},move:{random:!0,speed:1,direction:"top",out_mode:"out"}},interactivity:{events:{onhover:{enable:!0,mode:"bubble"},onclick:{enable:!0,mode:"repulse"}},modes:{bubble:{distance:250,duration:2,size:0,opacity:0},repulse:{distance:400,duration:4}}}}}),Object(n.jsxs)("div",{className:"login-page",children:[Object(n.jsx)("button",{className:"close-modal",onClick:this.props.closeModal,children:"x"}),Object(n.jsx)("h1",{className:"login-title",children:Object(n.jsxs)("div",{className:"welcome-txt ".concat(this.props.addFavMovieTxt?"hide-txt":""),children:[Object(n.jsx)("div",{children:"Welcome"}),Object(n.jsx)("div",{className:"welcome-txt2",children:"Sign in with your email address"})]})}),Object(n.jsx)("h2",{className:"mag",children:this.state.msg}),Object(n.jsxs)("div",{className:"auth-form",children:[!a&&this.state.section?t:e,Object(n.jsxs)("div",{className:"login-txt",children:["".concat(this.state.section?"DON'T HAVE ACCOUNT YET?":"")," "]}),Object(n.jsx)("div",{className:"google-oauth",children:Object(n.jsx)(oe,{className:"google-oauth-btn",closeModal:this.props.closeModal})}),Object(n.jsx)("div",{className:"login-txt-btn",onClick:this.onSignup,children:"".concat(this.state.section?"Signup Here":"Go Back")})]}),Object(n.jsx)("hr",{})]})]})}}]),a}(c.Component),le={login:function(e){return function(){var t=Object(C.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.login(e);case 3:return n=t.sent,a({type:"SET_USER",user:n}),t.abrupt("return",n);case 8:t.prev=8,t.t0=t.catch(0),console.log("UserActions: err in login",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},logout:Z,signup:function(e){return function(){var t=Object(C.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.signup(e);case 2:n=t.sent,a({type:"SET_USER",user:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},removeUser:function(e){return function(){var t=Object(C.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.remove(e);case 3:a({type:"USER_REMOVE",userId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("UserActions: err in removeUser",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},loadUsers:Q,guestLogin:Y},de=Object(i.b)((function(e){return{users:e.user.users,loggedInUser:e.user.loggedInUser,isLoading:e.system.isLoading}}),le)(ie),ue=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={isShown:!0},e.closeModal=function(){e.setState({isShown:!1}),e.props.onOpenModal()},e}return Object(y.a)(a,[{key:"render",value:function(){var e=this.state.isShown;return Object(n.jsx)("div",{className:"modal-wrapper ".concat(e?"":"hide"),onClick:this.closeModal,children:Object(n.jsx)("div",{className:"login-modal-content",onClick:function(e){return e.stopPropagation()},children:Object(n.jsx)(de,{closeModal:this.closeModal})})})}}]),a}(s.a.Component),be=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={showComponent:!1},e.onOpenModal=function(){e.setState({showComponent:!e.state.showComponent})},e.logout=function(){"/boards"===e.props.history.location.pathname?(e.props.history.push("/"),e.props.logout()):e.props.logout()},e.onGuestLogin=Object(C.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.guestLogin();case 2:window.location.assign("/#/boards/");case 3:case"end":return t.stop()}}),t)}))),e}return Object(y.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"home-page",children:[Object(n.jsxs)("div",{className:"login-btn",children:[!this.props.loggedInUser&&Object(n.jsx)("div",{className:"user-login  after-canvas",onClick:this.onOpenModal,children:"Log in"}),this.props.loggedInUser&&Object(n.jsxs)("div",{className:"user-name",children:["Hello ",this.props.loggedInUser.username]}),this.props.loggedInUser&&Object(n.jsx)("div",{id:"logout-btn",onClick:this.logout,children:"Logout"})]}),!this.props.loggedInUser&&Object(n.jsx)("div",{className:"login-btn",children:Object(n.jsx)("div",{className:"user-login  after-canvas",onClick:this.onGuestLogin,children:"Try as a guest"})}),this.state.showComponent&&Object(n.jsx)(ue,{onOpenModal:this.onOpenModal})]})}}]),a}(c.Component),je={logout:Z,guestLogin:Y},pe=Object(i.b)((function(e){return{loggedInUser:e.user.loggedInUser,users:e.user.users}}),je)(Object(k.g)(be)),me=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(y.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{children:"about"})}}]),a}(c.Component),fe=a(6),Oe=a(20),he=a(25),ve=["#f368e0","#FC427B","#e84118","#ff6b6b","#ff9f43","#f3a683","#feca57","#fbc531","#4cd137","#1dd1a1","#01a3a4","#48dbfb","#54a0ff","#00a8ff","#487eb0","#273c75","#3B3B98","#341f97","#5f27cd","#9c88ff","#D6A2E8"],ge=["A","B","C","D","R","T","U","I","O","P","L","Q","Z","E","V","M","N","G","J","H"];function xe(e){var t=e.setIsShown,a=e.addNewWorkspace,s=Object(c.useState)("New Workspace"),r=Object(fe.a)(s,2),o=r[0],i=r[1],l=Object(c.useState)("#f368e0"),d=Object(fe.a)(l,2),u=d[0],b=d[1],j=Object(c.useState)("M"),p=Object(fe.a)(j,2),m=p[0],f=p[1],O=Object(c.useState)(!1),h=Object(fe.a)(O,2),v=h[0],g=h[1],x=Object(c.useRef)();Object(c.useEffect)((function(){setTimeout((function(){x.current.focus()}),0)}),[]);return Object(n.jsxs)("div",{className:"create-workspace create-item-wrapper",children:[Object(n.jsx)("div",{className:"create-item-title",children:"Create Workspace"}),Object(n.jsxs)("div",{className:"workspace-icon",style:{backgroundColor:"".concat(u)},onClick:function(){g(!0)},tabIndex:"0",onBlur:function(){g(!1)},children:[m,!v&&Object(n.jsxs)("div",{className:"workspace-icon-edit",children:[Object(n.jsx)("div",{children:Object(n.jsx)(Oe.c,{className:"workspace-edit-pencil"})}),Object(n.jsx)("div",{children:"Edit"})]}),v&&Object(n.jsxs)("div",{className:" modal-default-style workspace-icon-modal",children:[Object(n.jsx)("div",{className:"small-font",children:"Background color"}),Object(n.jsx)("div",{className:"workspace-color-picker",children:ve.map((function(e){return Object(n.jsx)("div",{className:"workspace-color",style:{backgroundColor:"".concat(e)},onClick:function(){return b(e)},children:u===e&&Object(n.jsx)(he.b,{})})}))}),Object(n.jsx)("div",{className:"small-font",children:"Icon"}),Object(n.jsx)("div",{className:"icon-picker",children:ge.map((function(e){return Object(n.jsx)("div",{className:"icon",style:{backgroundColor:"".concat(u)},onClick:function(){return f(e)},children:e})}))})]})]}),Object(n.jsx)("div",{className:"workspace-name small-font",children:"Workspace name"}),Object(n.jsx)("input",{className:"new-item-input",type:"text",value:o,onChange:function(e){i(e.target.value)},onFocus:function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},ref:x,onKeyDown:function(e){if("Enter"===e.key){if(o.length<1)return;a(o,u,m),t(!1)}}}),Object(n.jsxs)("div",{className:"btns-container",children:[Object(n.jsx)("div",{className:"cancel-btn",onClick:function(){t(!1)},children:"Cancel"}),Object(n.jsx)("div",{className:"add-btn",onClick:function(){o.length<1||(a(o,u,m),t(!1))},children:"Create Workspace"})]})]})}var ke=a(26);function we(e){var t=e.setIsShown,a=e.children;return Object(n.jsx)("div",{className:"modal-wrapper",children:Object(n.jsxs)("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()},children:[Object(n.jsx)("div",{className:"close-popup-modal",onClick:function(){t(!1)},children:Object(n.jsx)(ke.c,{className:"icon"})}),a]})})}var Ne=a(22),Ce=a(43),Se=a(40);function ye(e){var t=e.workspace,a=Object(i.c)(),s=Object(i.d)((function(e){return e.user.loggedInUser})),r=Object(c.useState)(s.pinnedWorkspaces.includes(t._id)),o=Object(fe.a)(r,2),l=o[0],d=o[1];function u(e){l?function(e){var t=Object(b.a)(Object(b.a)({},s),{},{pinnedWorkspaces:s.pinnedWorkspaces.filter((function(t){return t!==e}))});a($(t))}(e):function(e){var t=Object(b.a)(Object(b.a)({},s),{},{pinnedWorkspaces:[].concat(Object(f.a)(s.pinnedWorkspaces),[e])});a($(t))}(e)}return Object(c.useEffect)((function(){d(s.pinnedWorkspaces.includes(t._id))}),[t,s.pinnedWorkspaces]),Object(n.jsx)("input",{type:"checkbox",className:"checkbox",defaultChecked:l,onChange:function(){return u(t._id)}})}function Be(e){var t=e.onMoveObject,a=e.object,s=e.isCheckbox,r=e.search,o=e.setSearch,l=Object(i.d)((function(e){return e.workspace.workspaces})),d=Object(i.d)((function(e){return e.workspace.currWorkspace})),u=Object(c.useState)("insideFolder"===a?l:l.filter((function(e){return e._id!==d._id}))),b=Object(fe.a)(u,2),j=b[0],p=b[1];return Object(c.useEffect)((function(){p("insideFolder"===a||s?l:l.filter((function(e){return e._id!==d._id})))}),[d,l,a,s]),Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{type:"search",placeholder:"Search Workspace",className:"forward-modal-search-input",onChange:function(e){return o(e.target.value)}}),j.map((function(e){return e.name.toLowerCase().includes(r.toLowerCase())?Object(n.jsxs)("div",{className:"modal-btn item-actions-btn forward-modal-btn ".concat(s?"remove-pointer":""),onClick:function(){s||t(e)},children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"workspace-icon",style:{backgroundColor:e.color},children:e.img}),Object(n.jsx)("span",{className:"workspace-name",children:e.name})]}),s&&Object(n.jsx)(ye,{workspace:e})]},e._id):null}))]})}function Te(e){var t=e.children,a=e.btn,s=e.setMoveToObject,r=e.isFolderModal,o=e.toggleShownForwardModal,i=e.isWorkspaceIconPicker,l=e.itemList,d=e.moveToObject,u=e.setSearch,b=Object(c.useState)(!1),j=Object(fe.a)(b,2),p=j[0],m=j[1];return Object(c.useEffect)((function(){o(p)}),[p,o]),Object(n.jsxs)("div",{className:"forward-modal-btn-wrapper",onMouseOver:function(){return m(!0)},onMouseLeave:function(){m(!1),r&&s(null),(l||d)&&u("")},children:[Object(n.jsxs)("div",{className:"modal-btn item-actions-btn forward-modal-btn ".concat(p?"open-modal":""," "),children:[a,Object(n.jsx)(Ne.d,{className:"icon"})]}),p&&Object(n.jsx)("div",{className:"modal-default-style ".concat(i?"menu-icon-picker":"forward-modal","\n                   ").concat(l||d?"items-list":"","\n                   "),children:t})]})}function _e(e){var t=e.setIsShown,a=e.setIsOpenToolbarOptionsModal,s=e.toggleShownForwardModal,r=e.onSortWorkspces,o=e.isSorted,i=Object(c.useState)(""),l=Object(fe.a)(i,2),d=l[0],u=l[1];return Object(n.jsxs)("div",{className:"modal-default-style item-actions-modal toolbar-options-modal",children:[Object(n.jsxs)("div",{className:"modal-btn item-actions-btn",onMouseDown:function(){t(!0),a(!1)},children:[Object(n.jsx)(Ne.a,{className:"icon"}),Object(n.jsx)("span",{children:"Add new workspace"})]}),Object(n.jsxs)(Te,{btn:Object(n.jsxs)("div",{children:[Object(n.jsx)(Ce.a,{className:"icon"}),Object(n.jsx)("span",{children:"Pin workspaces"})]}),toggleShownForwardModal:s,itemList:!0,setSearch:u,children:[Object(n.jsx)("div",{className:"pin-workspace-title",children:"Choose Workspace to pin on menu"}),Object(n.jsx)(Be,{isCheckbox:!0,search:d,setSearch:u})]}),Object(n.jsxs)("div",{className:"modal-btn item-actions-btn",onMouseDown:function(){r(),a(!1)},children:[Object(n.jsx)(Se.e,{className:"icon"}),Object(n.jsxs)("span",{children:["Sort by ","".concat(o?"default":"alphabetical")," order"]})]})]})}function Ee(e){var t=e.BsLightning,a=e.BsStar,s=e.BsThreeDots,r=e.onGettingCurrentWorkspace,o=e.addNewWorkspace,l=e.onSetToolbarMenu,d=Object(i.d)((function(e){return e.workspace.workspaces})),u=Object(i.d)((function(e){return e.user.loggedInUser})),b=Object(c.useState)(d.filter((function(e){return u.pinnedWorkspaces.includes(e._id)}))),j=Object(fe.a)(b,2),p=j[0],m=j[1],O=Object(i.d)((function(e){return e.workspace.currWorkspace})),h=Object(c.useState)(O._id),v=Object(fe.a)(h,2),g=v[0],x=v[1],k=Object(c.useState)(),w=Object(fe.a)(k,2),N=w[0],C=w[1],S=Object(c.useState)(!1),y=Object(fe.a)(S,2),B=y[0],T=y[1],_=Object(c.useState)(!1),E=Object(fe.a)(_,2),L=E[0],A=E[1],F=Object(c.useState)(!1),D=Object(fe.a)(F,2),I=D[0],W=D[1],U=Object(c.useRef)(),M=Object(c.useState)(!1),R=Object(fe.a)(M,2),P=R[0],G=R[1],K=Object(c.useState)(!1),V=Object(fe.a)(K,2),H=V[0],z=V[1];Object(c.useEffect)((function(){m(d.filter((function(e){return u.pinnedWorkspaces.includes(e._id)})))}),[u,u.pinnedWorkspaces,d]),Object(c.useEffect)((function(){x(O._id)}),[O,p]),Object(c.useEffect)((function(){C(g),l(g)}),[g,l]),Object(c.useEffect)((function(){I||setTimeout((function(){U&&U.current&&U.current.focus()}),0)}),[I]);return Object(c.useEffect)((function(){if(P){var e=Object(f.a)(p);e.sort((function(e,t){return e.name.localeCompare(t.name)})),z(e)}else z(p)}),[P,p]),H?Object(n.jsxs)("div",{className:"board-toolbar",children:[Object(n.jsxs)("div",{className:"board-first-area",children:[Object(n.jsxs)("div",{className:"icon-wrapper",children:[Object(n.jsx)(t,{className:"tollbar-icon ".concat("lightning"===N?"selected":""),onClick:function(){return x("lightning")}}),Object(n.jsx)("span",{className:"label-text",children:"Quick Search"})]}),Object(n.jsxs)("div",{className:"icon-wrapper",children:[Object(n.jsx)(a,{className:"tollbar-icon ".concat("favorite"===N?"selected":""),onClick:function(){return x("favorite")}}),Object(n.jsx)("span",{className:"label-text",children:"Favorite boards"})]}),H.map((function(e,t){return Object(n.jsx)("div",{className:"workspace-wrapper ".concat(N===e._id?"selected":""),onClick:function(){return x(e._id)},children:Object(n.jsx)("div",{className:"workspace-icon",onClick:function(){return r(e)},style:{backgroundColor:e.color},children:e.img})},e._id)}))]}),Object(n.jsxs)("div",{className:"board-second-area",children:[Object(n.jsx)("div",{className:"icon-wrapper",tabIndex:"0",onClick:function(){A((function(e){return!e}))},onBlur:function(){A(I)},ref:U,children:Object(n.jsx)(s,{className:"tollbar-icon ".concat(L?"selected":"")})}),L&&Object(n.jsx)(_e,{setIsOpenToolbarOptionsModal:A,setIsShown:T,toggleShownForwardModal:function(e){W(e)},onSortWorkspces:function(){G((function(e){return!e}))},isSorted:P})]}),B&&Object(n.jsx)(we,{setIsShown:T,children:Object(n.jsx)(xe,{setIsShown:T,addNewWorkspace:o})})]}):Object(n.jsx)("div",{children:"Loading...."})}var Le=a(12),Ae=a(27),Fe={query:De,getById:function(e){return A("workspace/".concat(e))},save:function(e){return D("workspace/".concat(e._id),e)},remove:function(e){return I("workspace/".concat(e))},add:function(e){return Ie.apply(this,arguments)},addLabel:function(e){var t=Ue();return t=[].concat(Object(f.a)(t),[e])},editLabel:function(e){var t=Ue();return t.map((function(t){return t._id===e._id?e:t})),t},removeLabel:function(e){var t=Ue();return t=t.filter((function(t){return t._id!==e}))}};function De(e){return A("workspace")}function Ie(){return(Ie=Object(C.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("workspace",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(){return(We=Object(C.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:return t=e.sent,e.next=5,t.map((function(e){return e.boards.filter((function(e){return!0===e.isLastSeen}))}))[0];case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(){return function(){return We.apply(this,arguments)}().statusLabelList}function Me(e){return function(){var t=Object(C.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"LOADING_START"}),t.next=4,Fe.query(e);case 4:n=t.sent,a({type:"SET_WORKSPACES",workspaces:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("WorkspaceActions: err in loadWorkspaces",t.t0);case 11:return t.prev=11,a({type:"LOADING_DONE"}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()}function Re(e){return function(){var t=Object(C.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Fe.save(e);case 3:a({type:"UPDATE_WORKSPACE",workspace:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("WorkspaceActions: err in updateWorkspace",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}function Pe(e){return function(){var t=Object(C.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"UPDATE_CURR_WORKSPACE",workspace:e})}catch(n){console.log("WorkspaceActions: err in updateCurrWorkspace",n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Ge(e){return function(){var t=Object(C.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"UPDATE_TASK_CONVERSATION",location:e})}catch(n){console.log("WorkspaceActions: err in updateTaskConversation",n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Ke(e){return function(){var t=Object(C.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"UPDATE_BOARD",board:e})}catch(n){console.log("WorkspaceActions: err in UPDATE_BOARD",n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Ve(e){var t=e.onMoveBoardToFolder,a=e.search,c=e.setSearch,s=Object(i.d)((function(e){return e.workspace.workspaces}));return Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{type:"search",placeholder:"Search Folder",className:"forward-modal-search-input",onChange:function(e){return c(e.target.value)}}),s.map((function(e){return e.folders.map((function(c){return c.name.toLowerCase().includes(a.toLowerCase())?Object(n.jsxs)("div",{className:"modal-btn \r item-actions-btn\r ",onClick:function(){return t(e,c)},children:[Object(n.jsx)(Oe.e,{className:"icon"}),Object(n.jsx)("span",{children:c.name})]},c._id):null}))}))]})}function He(e){var t=e.board,a=e.onGettingCurrentBoard,s=e.CgViewComfortable,r=e.removeBoard,o=e.editBoard,l=e.moveBoard,d=e.moveBoardToFolder,u=e.object,j=e.scroll,p=e.cmp,m=Object(i.d)((function(e){return e.workspace.workspaces})),f=Object(i.d)((function(e){return e.workspace.currBoard})),O=Object(i.d)((function(e){return e.user.loggedInUser})),h=Object(c.useState)(null),v=Object(fe.a)(h,2),g=v[0],x=v[1],k=Object(c.useState)(null),w=Object(fe.a)(k,2),S=(w[0],w[1]),y=Object(c.useRef)(null),B=Object(c.useState)(""),T=Object(fe.a)(B,2),_=T[0],E=T[1],L=Object(i.c)(),A=function(){var e,a=null;m.forEach((function(e){return e.boards.forEach((function(n){n._id===t._id&&(a=e)}))})),a||m.forEach((function(e){return e.folders.forEach((function(n){return n.boards.forEach((function(n){n._id===t._id&&(a=e)}))}))})),S(a),L((e=a,function(){var t=Object(C.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"UPDATE_BOARD_WORKSPACE",workspace:e})}catch(n){console.log("WorkspaceActions: err in updateBoardWorkspace",n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))};Object(c.useEffect)((function(){x(y&&y.current?y.current.getBoundingClientRect().bottom>500?Object(b.a)(Object(b.a)({},y.current.getBoundingClientRect()),{},{bottom:y.current.getBoundingClientRect().bottom-191}):y.current.getBoundingClientRect():{})}),[j]),Object(c.useEffect)((function(){H(t.name)}),[t]);var F=Object(c.useState)(!1),D=Object(fe.a)(F,2),I=D[0],W=D[1],U=Object(c.useState)(!1),M=Object(fe.a)(U,2),R=M[0],P=M[1],G=Object(c.useState)(t.name),K=Object(fe.a)(G,2),V=K[0],H=K[1],z=Object(c.useState)(null),J=Object(fe.a)(z,2),q=J[0],X=J[1],Q=Object(c.useRef)(),Z=Object(c.useState)(!1),Y=Object(fe.a)(Z,2),$=Y[0],te=Y[1];Object(c.useEffect)((function(){$||setTimeout((function(){y&&y.current&&y.current.focus()}),0)}),[$]);return t?Object(n.jsxs)("div",{className:"board-wrapper \n    ".concat(I?"open-modal":""," \n    ").concat(R?"updating-style":"","\n    ").concat(f._id===t._id?"active":"","\n    "),onClick:function(){return a(t)},tabIndex:"0",onBlur:function(){W($)},ref:y,children:[Object(n.jsxs)("div",{className:"name-wrapper",children:[Object(n.jsx)(s,{className:"icon ".concat(R?"updating-style":"")}),R?Object(n.jsx)("input",{className:"update-board-name-input",type:"text",value:V,onChange:function(e){H(e.target.value)},ref:Q,onBlur:function(){P(!1),function(){var e=Object(b.a)(Object(b.a)({},t),{},{name:V});L(Ke(e)),o(e)}()},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}}):Object(n.jsx)("span",{title:V.length>14?V:"",className:"".concat(V.length>14?"ellipsis-board-name":""),children:V})]}),Object(n.jsx)(Le.p,{className:"BsThreeDots ".concat(R?"hide":""),onClick:function(e){A(),y.current.getBoundingClientRect().bottom>500?x(Object(b.a)(Object(b.a)({},y.current.getBoundingClientRect()),{},{bottom:y.current.getBoundingClientRect().bottom-191})):y.current.getBoundingClientRect().bottom<250?x(p?Object(b.a)(Object(b.a)({},y.current.getBoundingClientRect()),{},{bottom:y.current.getBoundingClientRect().bottom+5+181}):Object(b.a)(Object(b.a)({},y.current.getBoundingClientRect()),{},{bottom:y.current.getBoundingClientRect().bottom+2})):x(y.current.getBoundingClientRect()),function(e){e.stopPropagation(),W((function(e){return!e}))}(e),console.log(y.current.getBoundingClientRect())}}),I&&Object(n.jsxs)("div",{className:"modal-default-style item-actions-modal board-modal-wrapper",style:{top:"".concat(g?g.bottom-181:0,"px")},children:[Object(n.jsxs)("div",{className:"modal-btn item-actions-btn",onClick:function(){W(!1),P(!0),setTimeout((function(){Q.current.focus()}),0)},children:[Object(n.jsx)(Le.h,{className:"icon"}),Object(n.jsx)("span",{children:"Rename Board"})]}),Object(n.jsxs)("div",{className:"modal-btn item-actions-btn",onClick:function(){L(ee(O,t._id)),W(!1)},children:[Object(n.jsx)(Ae.h,{className:"icon"}),O.favBoards.includes(t._id)?Object(n.jsx)("span",{children:"Remove from favorites"}):Object(n.jsx)("span",{children:"Add to favorites"})]}),Object(n.jsxs)(Te,{btn:Object(n.jsxs)("div",{children:[Object(n.jsx)(ke.a,{className:"icon"}),Object(n.jsx)("span",{children:"Move To"})]}),setMoveToObject:X,isFolderModal:!0,toggleShownForwardModal:function(e){te(e)},moveToObject:q,setSearch:E,children:[!q&&Object(n.jsxs)("div",{className:"modal-btn item-actions-btn forward-modal-btn",onClick:function(){X("Folder")},children:[Object(n.jsx)(ke.a,{className:"icon"}),Object(n.jsx)("span",{children:"Move To Folder"})]}),!q&&Object(n.jsxs)("div",{className:"modal-btn item-actions-btn",onClick:function(){X("Workspace")},children:[Object(n.jsx)(ke.a,{className:"icon"}),Object(n.jsx)("span",{children:"Move To Workspace"})]}),q&&Object(n.jsx)("div",{children:Object(n.jsxs)("div",{onClick:function(){X(null)},className:"forward-modal-title",children:[Object(n.jsxs)("div",{children:["Choose ",q]}),Object(n.jsx)("div",{className:"modal-btn item-actions-btn",children:"back"})]})}),"Workspace"===q&&Object(n.jsx)(Be,{onMoveObject:function(e){l(e,t),W(!1)},object:u,search:_,setSearch:E}),"Folder"===q&&Object(n.jsx)(Ve,{onMoveBoardToFolder:function(e,a){d(e,a,t),W(!1)},search:_,setSearch:E})]}),Object(n.jsx)("div",{className:"delete-btn-wrapper",children:Object(n.jsxs)("div",{className:"modal-btn item-actions-btn",onClick:function(){r(t._id),W(!1)},children:[Object(n.jsx)(Ce.b,{className:"icon"}),Object(n.jsx)("span",{children:"Delete"})]})})]})]}):Object(n.jsx)("div",{children:"Loading..."})}function ze(e){var t=e.boards,a=e.onGettingCurrentBoard,c=e.CgViewComfortable,s=e.removeBoard,r=e.editBoard,o=e.moveBoard,i=e.moveBoardToFolder,l=e.object,d=e.scroll,u=e.cmp;return t?Object(n.jsx)(n.Fragment,{children:t.map((function(e,t){return Object(n.jsx)(He,{board:e,onGettingCurrentBoard:a,CgViewComfortable:c,BsThreeDots:Le.p,removeBoard:s,editBoard:r,moveBoard:o,moveBoardToFolder:i,object:l,scroll:d,cmp:u})}))}):Object(n.jsx)("div",{children:"Loading..."})}function Je(e){var t=e.setIsShown,a=e.addNewBoard,s=Object(c.useState)("New Board"),r=Object(fe.a)(s,2),o=r[0],i=r[1],l=Object(c.useRef)();Object(c.useEffect)((function(){setTimeout((function(){l.current.focus()}),0)}),[]);return Object(n.jsxs)("div",{className:"create-item-wrapper",children:[Object(n.jsx)("div",{className:"create-item-title",children:"Create board"}),Object(n.jsx)("input",{className:"new-item-input",type:"text",value:o,onChange:function(e){i(e.target.value)},onFocus:function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},ref:l,onKeyDown:function(e){if("Enter"===e.key){if(o.length<1)return;a(o),t(!1)}}}),Object(n.jsxs)("div",{className:"btns-container",children:[Object(n.jsx)("div",{className:"cancel-btn",onClick:function(){t(!1)},children:"Cancel"}),Object(n.jsx)("div",{className:"add-btn",onClick:function(){o.length<1||(a(o),t(!1))},children:"Create Board"})]})]})}function qe(e){var t=e.folder,a=e.IoMdArrowDropdown,s=e.CgViewComfortable,r=e.onGettingCurrentBoard,o=e.addBoardInFolder,i=e.removeFolder,l=e.updateFolder,d=e.removeBoard,u=e.editBoard,j=e.moveFolder,p=e.moveBoard,m=e.moveBoardToFolder,f=e.scroll,O=e.index,h=e.isNewFolderCreated,v=e.onEndNewFolderUpdating,g=e.folders,x=Object(c.useState)(!1),k=Object(fe.a)(x,2),w=k[0],N=k[1],C=Object(c.useState)(!1),S=Object(fe.a)(C,2),y=S[0],B=S[1],T=Object(c.useState)(!1),_=Object(fe.a)(T,2),E=(_[0],_[1],Object(c.useState)(!1)),L=Object(fe.a)(E,2),A=L[0],F=L[1],D=Object(c.useState)(t.name),I=Object(fe.a)(D,2),W=I[0],U=I[1],M=Object(c.useState)(!1),R=Object(fe.a)(M,2),P=R[0],G=R[1],K=Object(c.useRef)(),V=Object(c.useState)(null),H=Object(fe.a)(V,2),z=H[0],J=H[1],q=Object(c.useRef)(null),X=Object(c.useState)(!1),Q=Object(fe.a)(X,2),Z=Q[0],Y=Q[1],$=Object(c.useState)(""),ee=Object(fe.a)($,2),te=ee[0],ae=ee[1];Object(c.useEffect)((function(){O===g.length-1&&h&&(F(!0),setTimeout((function(){K.current.focus()}),0))}),[O,g.length,h]),Object(c.useEffect)((function(){J(q&&q.current?q.current.getBoundingClientRect().bottom>500?Object(b.a)(Object(b.a)({},q.current.getBoundingClientRect()),{},{bottom:q.current.getBoundingClientRect().bottom-191}):q.current.getBoundingClientRect():{})}),[f]),Object(c.useEffect)((function(){U(t.name)}),[t]);Object(c.useEffect)((function(){Z||setTimeout((function(){q&&q.current&&q.current.focus()}),0)}),[Z]);return t?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"\n                folder-wrapper \n                ".concat(y?"open-modal":""," \n                ").concat(A?"updating-style":""),tabIndex:h?null:0,onBlur:function(){B(Z)},ref:q,children:[Object(n.jsxs)("div",{onClick:function(){N((function(e){return!e}))},className:"name-wrapper",children:[w?Object(n.jsx)(a,{className:"icon ".concat(A?"updating-style":"")}):Object(n.jsx)(Ne.g,{className:"icon ".concat(A?"updating-style":"")}),A?Object(n.jsx)("input",{className:"update-folder-name-input",type:"text",value:W,onChange:function(e){U(e.target.value)},ref:K,onBlur:function(){F(!1),function(){var e=Object(b.a)(Object(b.a)({},t),{},{name:W});l(e)}(),v()},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}}):Object(n.jsx)("span",{title:W.length>14?W:"",className:"".concat(W.length>14?"ellipsis-folder-name":""),children:W})]}),Object(n.jsx)(Le.p,{className:"BsThreeDots ".concat(A?"hide":""),onClick:function(e){q.current.getBoundingClientRect().bottom>500?J(Object(b.a)(Object(b.a)({},q.current.getBoundingClientRect()),{},{bottom:q.current.getBoundingClientRect().bottom-191})):J(q.current.getBoundingClientRect()),function(e){e.stopPropagation(),B((function(e){return!e}))}(e)}}),y&&Object(n.jsxs)("div",{className:"modal-default-style item-actions-modal folder-modal-wrapper ",style:{top:"".concat(z?z.bottom-181:0,"px")},children:[Object(n.jsxs)("div",{className:"modal-btn item-actions-btn",onClick:function(){G(!0),B(!1)},children:[Object(n.jsx)(s,{className:"icon"}),Object(n.jsx)("span",{children:"Create board in folder"})]}),Object(n.jsxs)("div",{className:"modal-btn item-actions-btn",onClick:function(){B(!1),F(!0),setTimeout((function(){K.current.focus()}),0)},children:[Object(n.jsx)(Le.h,{className:"icon"}),Object(n.jsx)("span",{children:"Rename folder"})]}),Object(n.jsx)(Te,{btn:Object(n.jsxs)("div",{children:[Object(n.jsx)(ke.a,{className:"icon"}),Object(n.jsx)("span",{children:"Move To Workspace"})]}),toggleShownForwardModal:function(e){Y(e)},itemList:!0,setSearch:ae,children:Object(n.jsx)(Be,{onMoveObject:function(e){j(e,t),B(!1)},search:te,setSearch:ae})}),Object(n.jsx)("div",{className:"delete-btn-wrapper",children:Object(n.jsxs)("div",{className:"modal-btn item-actions-btn",onClick:function(){i(t._id),B(!1)},children:[Object(n.jsx)(Ce.b,{className:"icon"}),Object(n.jsx)("span",{children:"Delete folder"})]})})]})]}),w&&Object(n.jsx)("div",{className:"folder-dropdown",children:t.boards.length>0&&Object(n.jsx)(ze,{boards:t.boards,onGettingCurrentBoard:r,CgViewComfortable:s,removeBoard:d,editBoard:u,moveBoard:p,moveBoardToFolder:m,object:"insideFolder",scroll:f})},t._id)]},t._id),P&&Object(n.jsx)(we,{setIsShown:G,children:Object(n.jsx)(Je,{addNewBoard:function(e){o(t,e)},setIsShown:G})})]}):Object(n.jsx)("div",{children:"Loading..."})}function Xe(e){var t=e.folders,a=e.IoMdArrowDropdown,c=e.CgViewComfortable,s=e.onGettingCurrentBoard,r=e.addBoardInFolder,o=e.removeFolder,i=e.updateFolder,l=e.removeBoard,d=e.editBoard,u=e.moveFolder,b=e.moveBoard,j=e.moveBoardToFolder,p=e.scroll,m=e.isNewFolderCreated,f=e.onEndNewFolderUpdating;return t?Object(n.jsx)(n.Fragment,{children:t.map((function(e,O){return Object(n.jsx)(qe,{folder:e,folders:t,IoMdArrowDropdown:a,CgViewComfortable:c,onGettingCurrentBoard:s,addBoardInFolder:r,removeFolder:o,updateFolder:i,removeBoard:l,editBoard:d,moveFolder:u,moveBoard:b,moveBoardToFolder:j,scroll:p,index:O,isNewFolderCreated:m,onEndNewFolderUpdating:f})}))}):Object(n.jsx)("div",{children:"Loading..."})}var Qe=a(41);function Ze(e){var t=e.updateWorkspace,a=Object(i.d)((function(e){return e.workspace.currWorkspace})),s=Object(c.useState)(a.color),r=Object(fe.a)(s,2),o=r[0],l=r[1],d=Object(c.useState)(a.img),u=Object(fe.a)(d,2),j=u[0],p=u[1];return Object(c.useEffect)((function(){l(a.color),p(a.img)}),[a]),Object(c.useEffect)((function(){if(o!==a.color){var e=Object(b.a)(Object(b.a)({},a),{},{color:o});t(e)}}),[o,t,a]),Object(c.useEffect)((function(){if(j!==a.img){var e=Object(b.a)(Object(b.a)({},a),{},{img:j});t(e)}}),[j,t,a]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"small-font",children:"Background color"}),Object(n.jsx)("div",{className:"workspace-color-picker",children:ve.map((function(e){return Object(n.jsx)("div",{className:"workspace-color",style:{backgroundColor:"".concat(e)},onClick:function(){return l(e)},children:o===e&&Object(n.jsx)(he.b,{})})}))}),Object(n.jsx)("div",{className:"small-font",children:"Icon"}),Object(n.jsx)("div",{className:"icon-picker",children:ge.map((function(e){return Object(n.jsx)("div",{className:"icon",style:{backgroundColor:"".concat(o)},onClick:function(){return p(e)},children:e})}))})]})}function Ye(e){var t=e.updateWorkspace,a=e.deleteWorkspace,s=e.onGettingCurrentWorkspace,r=e.onManageWorkspace,o=Object(i.c)(),l=Object(i.d)((function(e){return e.user.loggedInUser})),d=Object(i.d)((function(e){return e.workspace.workspaces})),u=Object(c.useState)(d.filter((function(e){return l.pinnedWorkspaces.includes(e._id)}))),j=Object(fe.a)(u,2),p=j[0],m=j[1],f=Object(i.d)((function(e){return e.workspace.currWorkspace})),O=Object(c.useState)(f.color),h=Object(fe.a)(O,2),v=h[0],g=h[1],x=Object(c.useState)(f.img),k=Object(fe.a)(x,2),w=k[0],N=k[1],C=Object(c.useState)(!1),S=Object(fe.a)(C,2),y=S[0],B=S[1],T=Object(c.useState)(f.name),_=Object(fe.a)(T,2),E=_[0],L=_[1],A=Object(c.useState)(!1),F=Object(fe.a)(A,2),D=F[0],I=F[1],W=Object(c.useRef)(),U=Object(c.useState)(!1),M=Object(fe.a)(U,2),R=M[0],P=M[1],G=Object(c.useRef)();Object(c.useEffect)((function(){m(d.filter((function(e){return l.pinnedWorkspaces.includes(e._id)})))}),[l,l.pinnedWorkspaces,d]),Object(c.useEffect)((function(){g(f.color),N(f.img),L(f.name)}),[f]),Object(c.useEffect)((function(){R||setTimeout((function(){G&&G.current&&G.current.focus()}),0)}),[R]);return Object(n.jsxs)("div",{className:"workspace-title ".concat(D?"open-modal":""),children:[Object(n.jsx)("div",{className:"workspace-symbol",style:{backgroundColor:"".concat(v)},children:w}),y?Object(n.jsx)("input",{type:"text",className:"workspace-name-input",value:E,onChange:function(e){L(e.target.value)},ref:W,onBlur:function(){B(!1);var e=Object(b.a)(Object(b.a)({},f),{},{name:E});E.length>1?t(e):L(f.name)},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}}):Object(n.jsx)("div",{title:E.length>12?E:"",className:"workspace-name ".concat(E.length>12?"ellipsis-board-name":""),children:E}),Object(n.jsxs)("div",{className:"workspace-name-options-btn-wrapper workspace-title-btn ".concat(D?"show-btn":""),tabIndex:"0",onBlur:function(){return I(!1)},ref:G,children:[Object(n.jsx)(Le.p,{className:"icon BsThreeDots",onClick:function(){I((function(e){return!e}))}}),D&&Object(n.jsxs)("div",{className:"modal-default-style toolbar-menu-options-modal item-actions-modal",children:[Object(n.jsxs)("div",{className:"modal-btn item-actions-btn",onClick:function(){B(!0),setTimeout((function(){W.current.focus()}),0),I(!1)},children:[Object(n.jsx)(Le.h,{className:"icon"}),Object(n.jsx)("span",{children:"Rename workspace"})]}),Object(n.jsx)(Te,{btn:Object(n.jsxs)("div",{children:[Object(n.jsx)(Qe.a,{className:"icon"}),Object(n.jsx)("span",{children:"Change icon"})]}),toggleShownForwardModal:function(e){P(e)},isWorkspaceIconPicker:!0,children:Object(n.jsx)(Ze,{updateWorkspace:t})}),Object(n.jsxs)("div",{className:"modal-btn item-actions-btn",onClick:function(){!function(e){var t=Object(b.a)(Object(b.a)({},l),{},{pinnedWorkspaces:l.pinnedWorkspaces.filter((function(t){return t!==e}))});o($(t)),p.map((function(e){return e.boards.map((function(t){return!0===t.isLastSeen?s(e):null}))}))}(f._id),I(!1)},children:[Object(n.jsx)(Ce.a,{className:"icon"}),Object(n.jsx)("span",{children:"Unpin workspace from menu"})]}),Object(n.jsxs)("div",{className:"modal-btn item-actions-btn",onClick:function(){r(),I(!1)},children:[Object(n.jsx)(ke.e,{className:"icon"}),Object(n.jsx)("span",{children:"Manage workspace"})]}),Object(n.jsxs)("div",{className:"modal-btn item-actions-btn",onClick:function(){a(f._id),I(!1)},children:[Object(n.jsx)(Ce.b,{className:"icon"}),Object(n.jsx)("span",{children:"Delete workspace"})]})]})]})]})}function $e(e){var t=e.btnName,a=(e.addNewBoard,e.addNewFloder),c=e.setIsShown;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"modal-default-style actions-modal-wrapper",children:function(){var e=[];switch(t){case"Add":e.push(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"actions-btn actions-modal-btn modal-btn ",onClick:function(){c(!0)},children:[Object(n.jsx)(Qe.c,{className:"icon"}),Object(n.jsx)("span",{children:"New Board"})]}),Object(n.jsxs)("div",{className:"actions-btn modal-btn",onClick:a,children:[Object(n.jsx)(Qe.c,{className:"icon"}),Object(n.jsx)("span",{children:"New Folder"})]})]}));break;case"Filters":case"Search":e.push(Object(n.jsx)(n.Fragment,{children:t}));break;default:e.push("")}return e}()})})}var et=a(73);function tt(e){var t=e.btnName,a=e.addNewBoard,s=e.addNewFloder,r=Object(c.useState)(!1),o=Object(fe.a)(r,2),i=o[0],l=o[1],d=Object(c.useState)(!1),u=Object(fe.a)(d,2),b=u[0],j=u[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"actions-btn-wrapper",tabIndex:"0",onBlur:function(){l(!1)},children:[i&&Object(n.jsx)($e,{btnName:t,addNewBoard:a,addNewFloder:s,setIsShown:j}),Object(n.jsx)("div",{className:"add actions-btn ".concat(i?"active":""),onClick:function(){l((function(e){return!e}))},children:function(){var e=[];switch(t){case"Add":e.push(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Ae.f,{className:"icon"}),Object(n.jsx)("span",{children:"Add"})]}));break;case"Filters":e.push(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(et.a,{className:"icon"}),Object(n.jsx)("span",{children:"Filters"})]}));break;default:e.push("")}return e}()})]}),b&&Object(n.jsx)(we,{setIsShown:j,children:Object(n.jsx)(Je,{addNewBoard:a,setIsShown:j})})]})}var at=a(32);function nt(e){var t=e.search,a=e.setSearch,s=e.setFilteredFolders,r=e.setFilteredBoards,o=Object(i.d)((function(e){return e.workspace.currWorkspace})),l=Object(c.useState)(!1),d=Object(fe.a)(l,2),u=d[0],b=d[1],j=Object(c.useRef)();return Object(c.useEffect)((function(){s(o.folders.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})))}),[t,o.folders,s]),Object(c.useEffect)((function(){r(o.boards.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})))}),[t,o.boards,r]),Object(n.jsx)(n.Fragment,{children:u?Object(n.jsx)("div",{className:"search",children:Object(n.jsx)("input",{ref:j,className:"search-input menu-btn",type:"search",placeholder:"Search",onChange:function(e){return a(e.target.value)},onBlur:function(e){""===e.target.value&&b(!1)},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}})}):Object(n.jsx)("div",{className:"actions-btn-wrapper",onClick:function(){b(!0),setTimeout((function(){j&&j.current&&j.current.focus()}),0)},children:Object(n.jsxs)("div",{className:"add actions-btn",children:[Object(n.jsx)(at.d,{className:"icon"}),Object(n.jsx)("span",{children:"Search"})]})})})}var ct={getById:function(e,t){var a={};e.map((function(e){return e.boards.map((function(e){return a=e._id===t?e:null}))})),a||e.map((function(e){return e.folders.map((function(e){return e.boards.map((function(e){return a=e._id===t?e:null}))}))}));return a},addBoard:function(e,t){var a={_id:Date.now().toString(16)+Math.random().toString(16),isLastSeen:!1,name:t,desc:"Add board description",createdAt:Date.now(),lastUpdated:null,statusLabelList:[{_id:st(),color:"#ffbe0c",name:"Working on it"},{_id:st(),color:"#2bd44e",name:"Done"},{_id:st(),color:"#c73d51",name:"Delayed"},{_id:st(),color:"rgb(255 60 125)",name:"To do"}],activities:[],isPrivate:!1,owner:{},tableColumns:[{_id:st(),title:"Group Title",type:"Group Title",taskKey:"name"},{_id:st(),title:"Person123",type:"user/users array selector/picker",taskKey:"owner"},{_id:st(),title:"Status123",type:"selector",taskKey:"status"},{_id:st(),title:"Date",type:"string",taskKey:"createdAt"}],tables:[{_id:st(),name:"Group Title",color:"#0085ff",createdAt:Date.now(),lastUpdated:"",tasks:[{_id:st(),name:"Item 1",createdAt:Date.now(),conversations:[],package:"",owner:[],milestone:"",status:{name:"Done",color:"rgb(43, 212, 78)"},policyState:{name:"",color:""},timeline:{from:"",to:""},duration:"",tags:[],files:[],weight:"",dateCompleted:null,progress:"",lastUpdated:{}},{_id:st(),name:"Item 2",createdAt:Date.now(),conversations:[],package:"",owner:[],milestone:"",status:{name:"Working on it",color:"rgb(255, 190, 12)"},policyState:{name:"",color:""},timeline:{from:"",to:""},duration:"",tags:[],files:[],weight:"",dateCompleted:null,progress:"",lastUpdated:{}},{_id:st(),name:"Item 3",createdAt:Date.now(),conversations:[],package:"",owner:[],milestone:"",status:{name:"",color:"rgb(180, 182, 188)"},policyState:{name:"",color:""},timeline:{from:"",to:""},duration:"",tags:[],files:[],weight:"",dateCompleted:null,progress:"",lastUpdated:{}}]},{_id:st(),name:"Group Title",color:"#b456dd",createdAt:Date.now(),lastUpdated:"",tasks:[{_id:st(),name:"Item 4",createdAt:Date.now(),conversations:[],package:"",owner:[],milestone:"",status:{name:"",color:"rgb(180, 182, 188)"},policyState:{name:"",color:""},timeline:{from:"",to:""},duration:"",tags:[],files:[],weight:"",dateCompleted:null,progress:"",lastUpdated:{}},{_id:st(),name:"Item 5",createdAt:Date.now(),conversations:[],package:"",owner:[],milestone:"",status:{name:"",color:"rgb(180, 182, 188)"},policyState:{name:"",color:""},timeline:{from:"",to:""},duration:"",tags:[],files:[],weight:"",dateCompleted:null,progress:"",lastUpdated:{}}]}]},n=e;return n.boards=[].concat(Object(f.a)(n.boards),[a]),n},addBoardInFolder:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"New Board",n={_id:Date.now().toString(16)+Math.random().toString(16),isLastSeen:!1,name:a,desc:"Add board description",createdAt:Date.now(),lastUpdated:null,statusLabelList:[{_id:st(),color:"#ffbe0c",name:"Working on it"},{_id:st(),color:"#2bd44e",name:"Done"},{_id:st(),color:"#c73d51",name:"Delayed"},{_id:st(),color:"rgb(255 60 125)",name:"To do"}],activities:[],isPrivate:!1,owner:{},tableColumns:[{_id:st(),title:"Group Title",type:"Group Title",taskKey:"name"},{_id:st(),title:"Person123",type:"user/users array selector/picker",taskKey:"owner"},{_id:st(),title:"Status123",type:"selector",taskKey:"status"},{_id:st(),title:"Date",type:"string",taskKey:"createdAt"}],tables:[{_id:st(),name:"Group Title",color:"#0085ff",createdAt:Date.now(),lastUpdated:"",tasks:[{_id:st(),name:"Item 1",createdAt:Date.now(),conversations:[],package:"",owner:[],milestone:"",status:{name:"Done",color:"rgb(43, 212, 78)"},policyState:{name:"",color:""},timeline:{from:"",to:""},duration:"",tags:[],files:[],weight:"",dateCompleted:null,progress:"",lastUpdated:{}},{_id:st(),name:"Item 2",createdAt:Date.now(),conversations:[],package:"",owner:[],milestone:"",status:{name:"Working on it",color:"rgb(255, 190, 12)"},policyState:{name:"",color:""},timeline:{from:"",to:""},duration:"",tags:[],files:[],weight:"",dateCompleted:null,progress:"",lastUpdated:{}},{_id:st(),name:"Item 3",createdAt:Date.now(),conversations:[],package:"",owner:[],milestone:"",status:{name:"",color:"rgb(180, 182, 188)"},policyState:{name:"",color:""},timeline:{from:"",to:""},duration:"",tags:[],files:[],weight:"",dateCompleted:null,progress:"",lastUpdated:{}}]},{_id:st(),name:"Group Title",color:"#b456dd",createdAt:Date.now(),lastUpdated:"",tasks:[{_id:st(),name:"Item 4",createdAt:Date.now(),conversations:[],package:"",owner:[],milestone:"",status:{name:"",color:"rgb(180, 182, 188)"},policyState:{name:"",color:""},timeline:{from:"",to:""},duration:"",tags:[],files:[],weight:"",dateCompleted:null,progress:"",lastUpdated:{}},{_id:st(),name:"Item 5",createdAt:Date.now(),conversations:[],package:"",owner:[],milestone:"",status:{name:"",color:"rgb(180, 182, 188)"},policyState:{name:"",color:""},timeline:{from:"",to:""},duration:"",tags:[],files:[],weight:"",dateCompleted:null,progress:"",lastUpdated:{}}]}]},c=Object(b.a)({},t);return c.boards=[].concat(Object(f.a)(c.boards),[n]),e.folders=e.folders.map((function(e){return e._id===c._id?c:e})),e},removeBoard:function(e,t){var a=null,n={};if(e.boards.forEach((function(e){return e._id===t?a=Object(b.a)({},e):null})),a)n=Object(b.a)(Object(b.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==t}))});else if(e.folders.forEach((function(e){return e.boards.forEach((function(e){return e._id===t?a=e:null}))})),a){var c={};e.folders.forEach((function(e){return e.boards.forEach((function(t){return t._id===a._id?c=e:null}))})),n=Object(b.a)(Object(b.a)({},e),{},{folders:e.folders.map((function(e){return e._id===c._id?e=Object(b.a)(Object(b.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==a._id}))}):e}))})}return n},addFolder:function(e){var t={_id:Date.now().toString(16)+Math.random().toString(16),name:"New Folder",boards:[]},a=e;return a.folders=[].concat(Object(f.a)(a.folders),[t]),a},removeFolder:function(e,t){var a=e;return a.folders=a.folders.filter((function(e){return e._id!==t})),a},updateFolder:function(e,t){var a=e;return a.folders=a.folders.map((function(e){return e._id===t._id?t:e})),a},addTable:function(e){var t={_id:Date.now().toString(16)+Math.random().toString(16)+"0".repeat(16),name:"New Group",color:"rgb(180, 182, 188)",createdAt:Date.now(),lastUpdated:"",tasks:[]},a=e;return a.tables=[t].concat(Object(f.a)(a.tables)),a},removeTable:function(e,t){var a=t;return a.tables=a.tables.filter((function(t){return t._id!==e})),a},updateTable:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{tables:e.tables.map((function(e){return e._id===t._id?t:e}))})},addTask:function(e,t,a,n){var c={_id:Date.now().toString(16)+Math.random().toString(16)+"0".repeat(16),name:a,createdAt:Date.now(),conversations:[],package:"",owner:[],milestone:"",status:{name:"",color:"rgb(180, 182, 188)"},policyState:{name:"",color:""},timeline:{from:"",to:""},duration:"",tags:[],files:[],weight:"",dateCompleted:null,progress:"",lastUpdated:{byUser:n,date:(new Date).getTime()}};c.owner.push(n._id);var s=t;return s.tables.map((function(t){return t._id===e._id?t.tasks.push(c):t})),s},removeTask:function(e,t,a){var n=Object(b.a)(Object(b.a)({},t),{},{tasks:t.tasks.filter((function(t){return t._id!==e}))});return Object(b.a)(Object(b.a)({},a),{},{tables:a.tables.map((function(e){return e._id===n._id?n:e}))})},updateTask:function(e,t,a,n){return a.lastUpdated={byUser:n,date:(new Date).getTime()},Object(b.a)(Object(b.a)({},t),{},{tables:t.tables.map((function(t){return t._id===e._id?Object(b.a)(Object(b.a)({},t),{},{tasks:t.tasks.map((function(e){return e._id===a._id?a:e}))}):t}))})}};function st(){return"_"+Math.random().toString(36).substr(2,9)}function rt(e){var t=e.onGettingCurrentBoard,a=e.CgViewComfortable,s=e.scroll,r=Object(i.d)((function(e){return e.user.loggedInUser})),o=Object(i.d)((function(e){return e.user.loggedInUser.favBoards})),l=Object(i.d)((function(e){return e.workspace.workspaces})),d=Object(i.d)((function(e){return e.workspace.boardWorkspace})),u=Object(i.c)(),j=Object(c.useState)([]),p=Object(fe.a)(j,2),m=p[0],O=p[1],h=Object(c.useState)([]),v=Object(fe.a)(h,2),g=v[0],x=v[1],k=Object(c.useState)([]),w=Object(fe.a)(k,2),N=w[0],C=w[1],S=Object(c.useState)([]),y=Object(fe.a)(S,2),B=y[0],T=y[1],_=function(e){var t=ct.removeBoard(d,e);u(Re(t)),u(Pe(t))},E=function(e,t){if(d._id===e._id){var a=ct.removeBoard(d,t._id),n=Object(b.a)(Object(b.a)({},a),{},{boards:[].concat(Object(f.a)(a.boards),[t])});u(Re(n)),u(Pe(n))}else{_(t._id);var c=Object(b.a)(Object(b.a)({},e),{},{boards:[].concat(Object(f.a)(e.boards),[t])});u(Re(c)),u(Pe(c))}},L=function(e,t,a){var n=ct.removeBoard(d,a._id);u(Re(n)),u(Pe(n));var c=Object(b.a)(Object(b.a)({},t),{},{boards:[].concat(Object(f.a)(t.boards),[a])});if(n._id===e._id){var s=ct.updateFolder(n,c);u(Re(s)),u(Pe(s))}else{var r=ct.updateFolder(e,c);u(Re(r)),u(Pe(r))}};function A(e){var t=d,a={isBoardInsideFolder:!1,cuurFolde:null};t.folders.map((function(t){return t.boards.map((function(n){return n._id===e._id?a=Object(b.a)(Object(b.a)({},a),{},{isBoardInsideFolder:!0,cuurFolde:t}):null}))})),a.isBoardInsideFolder?t=Object(b.a)(Object(b.a)({},d),{},{folders:d.folders.map((function(t){return t._id===a.cuurFolde._id?Object(b.a)(Object(b.a)({},t),{},{boards:t.boards.map((function(t){return t._id===e._id?e:t}))}):t}))}):t.boards=t.boards.map((function(t){return t._id===e._id?e:t})),u(Re(t)),u(Pe(t))}return Object(c.useEffect)((function(){O([]),x([]),r.favBoards.length>0&&l.forEach((function(e){O((function(t){return[].concat(Object(f.a)(t),Object(f.a)(e.boards))})),e.folders.map((function(e){return x((function(t){return[].concat(Object(f.a)(t),Object(f.a)(e.boards))}))}))}))}),[r,o,l]),Object(c.useEffect)((function(){C(m.filter((function(e){return o.includes(e._id)})))}),[m,o]),Object(c.useEffect)((function(){T(g.filter((function(e){return o.includes(e._id)})))}),[g,o]),Object(n.jsxs)("div",{className:"favorite-toolbar-menu",children:[Object(n.jsxs)("div",{className:"title-wrapper",children:[Object(n.jsx)(Le.d,{className:"star"}),Object(n.jsx)("div",{children:"Favorites"})]}),N.length>0||B.length>0?Object(n.jsxs)("div",{children:[N.length>0&&Object(n.jsx)(ze,{boards:N,onGettingCurrentBoard:t,CgViewComfortable:a,removeBoard:_,editBoard:A,moveBoard:E,moveBoardToFolder:L,scroll:s,cmp:"favorite"}),B.length>0&&Object(n.jsx)(ze,{boards:B,onGettingCurrentBoard:t,CgViewComfortable:a,removeBoard:_,editBoard:A,moveBoard:E,moveBoardToFolder:L,scroll:s,object:"insideFolder",cmp:"favorite"})]}):Object(n.jsxs)("div",{className:"no-favorite-msg",children:[Object(n.jsx)("div",{children:Object(n.jsx)(Le.d,{className:"star"})}),Object(n.jsx)("div",{children:"No favorite boards yet"}),Object(n.jsx)("div",{children:"'Star' any board so that you can easily access it later"})]})]})}function ot(e){var t=e.IoIosArrowForward,a=e.isToolbarMenuClose,s=e.onToggleToolbarMenu,r=e.IoIosArrowBack,o=e.workspace,i=e.IoMdArrowDropdown,l=e.CgViewComfortable,d=e.onGettingCurrentBoard,u=(e.onGettingCurrentBoardInWorkspace,e.addNewBoard),b=e.addNewFloder,j=e.addBoardInFolder,p=e.removeFolder,m=e.updateFolder,f=e.removeBoard,O=e.editBoard,h=e.moveFolder,v=e.moveBoard,g=e.moveBoardToFolder,x=e.isNewFolderCreated,k=e.onEndNewFolderUpdating,w=e.updateWorkspace,N=e.deleteWorkspace,C=e.onGettingCurrentWorkspace,S=e.onManageWorkspace,y=e.toolbarActiveBtn,B=Object(c.useState)(0),T=Object(fe.a)(B,2),_=T[0],E=T[1],L=Object(c.useState)(""),A=Object(fe.a)(L,2),F=A[0],D=A[1],I=Object(c.useState)([]),W=Object(fe.a)(I,2),U=W[0],M=W[1],R=Object(c.useState)([]),P=Object(fe.a)(R,2),G=P[0],K=P[1];return Object(c.useEffect)((function(){console.log("scroll",_)}),[_]),o.boards&&o.folders?Object(n.jsx)("div",{className:"board-toolbar-menu ".concat(a?"close-toolbar-menu":"open-toolbar-menu"),children:Object(n.jsxs)("div",{className:"sticky-wrapper",children:[Object(n.jsxs)("div",{className:"toggle-toolbar-menu-btn ".concat(a?"open":"close"),onClick:s,children:[a?Object(n.jsx)(t,{style:{width:"15px",height:"15px"}}):Object(n.jsx)(r,{style:{width:"15px",height:"15px"}}),a?Object(n.jsx)("span",{className:"label-text",children:"Open navigation"}):Object(n.jsx)("span",{className:"label-text",children:"Close navigation"})]}),Object(n.jsx)("div",{className:"navigation-container ".concat(a?"hide-txt":"show-txt"),children:"favorite"===y?Object(n.jsx)(rt,{onGettingCurrentBoard:d,CgViewComfortable:l,removeBoard:f,editBoard:O,moveBoard:v,moveBoardToFolder:g,scroll:_}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"nav-first-area",children:[Object(n.jsx)(Ye,{updateWorkspace:w,deleteWorkspace:N,onGettingCurrentWorkspace:C,onManageWorkspace:S}),Object(n.jsxs)("div",{className:"actions-container",children:[Object(n.jsx)(tt,{btnName:"Add",addNewBoard:u,addNewFloder:b}),Object(n.jsx)(tt,{btnName:"Filters"}),Object(n.jsx)(nt,{search:F,setSearch:D,setFilteredFolders:M,setFilteredBoards:K})]})]}),Object(n.jsx)("div",{className:"nav-second-area",children:Object(n.jsx)("div",{className:"second-area-wrapper",children:Object(n.jsxs)("div",{className:"second-area-content",onScroll:function(){console.log("scroll"),E((function(e){return e+1}))},children:[o.folders.length>0&&Object(n.jsx)(Xe,{folders:U,IoMdArrowDropdown:i,CgViewComfortable:l,onGettingCurrentBoard:d,addBoardInFolder:j,removeFolder:p,updateFolder:m,removeBoard:f,editBoard:O,moveFolder:h,moveBoard:v,moveBoardToFolder:g,scroll:_,isNewFolderCreated:x,onEndNewFolderUpdating:k}),o.boards.length>0&&Object(n.jsx)(ze,{boards:G,onGettingCurrentBoard:d,CgViewComfortable:l,removeBoard:f,editBoard:O,moveBoard:v,moveBoardToFolder:g,scroll:_}),o.boards.length<1&&o.folders.length<1&&Object(n.jsxs)("div",{className:"empty-workspace",children:[Object(n.jsx)("div",{className:"small-font",children:"Workspace is empty"}),Object(n.jsx)("div",{className:"small-font",children:"Create or add boards"})]})]})})})]})})]})}):Object(n.jsx)("div",{children:"Loading...."})}var it=a(55),lt=a.n(it),dt=a(71),ut=a(56),bt=a(48),jt=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(S.a)(this,a);for(var c=arguments.length,r=new Array(c),o=0;o<c;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={board:{},name:"",desc:"",isSearchActive:!1},e.inputRef=s.a.createRef(),e.focusText=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},e.handleChangeBoardName=function(t){e.setState({name:t.target.value}),e.setState({board:Object(b.a)(Object(b.a)({},e.state.board),{},{name:t.target.value})})},e.handleChangeBoardDesc=function(t){e.setState({desc:t.target.value}),e.setState({board:Object(b.a)(Object(b.a)({},e.state.board),{},{desc:t.target.value})})},e.changeToContentEditable=function(t){var a=[];return"name"===t?a.push(Object(n.jsx)(lt.a,{onFocus:e.focusText,className:"content-editable",innerRef:e.editableBoardName,html:e.state.name,disabled:!1,onChange:e.handleChangeBoardName,onBlur:function(){var t=Object(b.a)(Object(b.a)({},e.props.board),{},{name:e.state.name});e.props.onEditBoard(t),e.props.updateCurrBoard(t)},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}})):a.push(Object(n.jsx)(lt.a,{onFocus:e.focusText,className:"content-editable",innerRef:e.editableBoardDesc,html:e.state.desc,disabled:!1,onChange:e.handleChangeBoardDesc,onBlur:function(){var t=Object(b.a)(Object(b.a)({},e.props.board),{},{desc:e.state.desc});e.props.onEditBoard(t),e.props.updateCurrBoard(t)},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}})),a},e.toggleFavUserBoardList=function(){e.props.toggleFavUserBoardList(e.props.loggedInUser,e.props.board._id)},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=Object(C.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.board&&(this.setState({name:this.props.board.name}),this.setState({desc:this.props.board.desc}),this.setState({board:this.props.board})),this.editableBoardName=s.a.createRef(),this.editableBoardDesc=s.a.createRef();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(C.a)(N.a.mark((function e(t,a){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.match.params.id!==this.props.match.params.id&&(this.setState({name:this.props.board.name}),this.setState({desc:this.props.board.desc}),this.setState({board:this.props.board})),t.board.name!==this.props.board.name&&(this.setState({name:this.props.board.name}),this.setState({desc:this.props.board.desc}),this.setState({board:this.props.board}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getFavBoardStyle",value:function(){if(this.props.loggedInUser.favBoards.includes(this.state.board._id))return"fav"}},{key:"render",value:function(){var e=this,t=this.props,a=t.onAddNewTable,c=t.setSearch,s=this.state.board;return s?Object(n.jsxs)("div",{className:"board-header",children:[Object(n.jsxs)("div",{className:"board-info",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("span",{className:"board-title",children:this.changeToContentEditable("name")}),Object(n.jsxs)("div",{className:"add-to-favorite-btn",children:[Object(n.jsx)(Le.d,{className:"BsFillStarFill ".concat(this.getFavBoardStyle()),onClick:this.toggleFavUserBoardList}),this.props.loggedInUser.favBoards.includes(s._id)?Object(n.jsx)("span",{className:"label-text arrow-up",children:"Remove from favorites"}):Object(n.jsx)("span",{className:"label-text arrow-up",children:"Add to favorites"})]})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"board-viewers",children:"img"}),Object(n.jsxs)("div",{className:"board-integrations",children:[Object(n.jsxs)("div",{className:"icons-container",children:[Object(n.jsx)("div",{className:"icon-hexagon-wrapper",children:Object(n.jsx)("img",{src:"https://img.icons8.com/color/13/000000/slack-new.png",alt:""})}),Object(n.jsx)("div",{className:"icon-hexagon-wrapper",children:Object(n.jsx)("img",{src:"https://img.icons8.com/fluent/13/000000/gmail--v1.png",alt:""})})]}),Object(n.jsx)("span",{children:"Integrate / 2"})]}),Object(n.jsxs)("div",{className:"board-automations",children:[Object(n.jsx)(dt.a,{}),Object(n.jsx)("span",{children:"Automate / 2"})]}),Object(n.jsxs)("div",{className:"board-subscribers",children:[Object(n.jsx)(Le.i,{}),Object(n.jsx)("span",{children:" / 1"})]}),Object(n.jsx)("div",{className:"board-activities",children:"Activities / 0"}),Object(n.jsx)("div",{className:"board-more-options",children:Object(n.jsx)(Le.p,{})})]})]}),Object(n.jsx)("div",{className:"board-desc",children:this.changeToContentEditable("desc")}),Object(n.jsxs)("div",{className:"board-actions",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)(ut.a,{style:{width:"15px",height:"15px"}}),Object(n.jsx)("span",{className:"main-table",children:"Main Table / 4"}),Object(n.jsx)(Ne.c,{style:{width:"12px",height:"12px"}})]}),Object(n.jsxs)("div",{className:"actions-continer",children:[Object(n.jsxs)("div",{onClick:a,children:[Object(n.jsx)("span",{children:"New Item"}),Object(n.jsx)(Ne.c,{style:{width:"12px",height:"12px"}})]}),Object(n.jsx)("div",{className:"header-search-wrapper",children:this.state.isSearchActive?Object(n.jsx)("input",{className:"search-input stretch-left",ref:this.inputRef,type:"search",onChange:function(e){return c(e.target.value)},placeholder:"Search",onBlur:function(t){""===t.target.value&&e.setState({isSearchActive:!1})},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}}):Object(n.jsxs)("div",{onClick:function(){e.setState({isSearchActive:!0}),setTimeout((function(){e.inputRef&&e.inputRef.current&&e.inputRef.current.focus()}),0)},className:"header-action-btn",children:[Object(n.jsx)(at.d,{}),Object(n.jsx)("span",{children:"Search"})]})}),Object(n.jsxs)("div",{children:[Object(n.jsx)(he.f,{}),Object(n.jsx)("span",{children:"Person"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(Le.e,{}),Object(n.jsx)("span",{children:"Filter"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(bt.a,{}),Object(n.jsx)("span",{children:"Sort"})]}),Object(n.jsx)("div",{children:Object(n.jsx)(Le.p,{})})]})]})]}):Object(n.jsx)("div",{children:"Loading...."})}}]),a}(c.Component),pt={loadWorkspaces:Me,updateWorkspace:Re,toggleFavUserBoardList:ee,updateCurrBoard:Ke},mt=Object(i.b)((function(e){return{workspaces:e.workspace.workspaces,board:e.workspace.currBoard,loggedInUser:e.user.loggedInUser}}),pt)(Object(k.g)(jt)),ft=a(44),Ot=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={isUpdateLabelName:!1,label:{}},e.handelChangeLabelName=function(t){e.setState({label:Object(b.a)(Object(b.a)({},e.state.label),{},{name:t.target.value})},(function(){e.props.updateLabel(e.state.label)}))},e.onUpdateLabelName=function(){e.setState({label:e.props.statusLabel},(function(){e.setState({isUpdateLabelName:!0},(function(){e.editableLabelName.current.focus(),e.editableLabelName.current.select()}))}))},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=Object(C.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({label:this.props.statusLabel}),this.editableLabelName=s.a.createRef();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.isUpdateLabelName,c=t.label,s=this.props.statusLabel;return Object(n.jsx)("span",{className:"edit-label-name",onClick:this.onUpdateLabelName,children:a?Object(n.jsx)("input",{className:"update-label-name-input",type:"text",value:c.name,onChange:this.handelChangeLabelName,ref:this.editableLabelName,onBlur:function(){e.setState({isUpdateLabelName:!1})},onKeyDown:function(t){"Enter"===t.key&&(t.target.blur(),e.setState({isUpdateLabelName:!1}))}}):Object(n.jsx)("span",{children:s.name})})}}]),a}(c.Component),ht=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={isUpdateLabelColor:!1,newLabelColor:null,currLabel:{}},e.onToggleUpdateLabelColor=function(t){e.setState({isUpdateLabelColor:!e.state.isUpdateLabelColor},(function(){e.props.hideColorPicker(e.state.isUpdateLabelColor)})),e.setState({currLabel:t})},e.onChangeNewLabelColor=function(t){e.setState({newLabelColor:t})},e.onRemoveNewLabelColor=function(){e.setState({newLabelColor:null})},e.onSaveColor=function(t){e.state.isUpdateLabelColor&&(e.setState({currLabel:Object(b.a)(Object(b.a)({},e.state.currLabel),{},{color:t})}),e.setState({isUpdateLabelColor:!1},(function(){e.props.hideColorPicker(e.state.isUpdateLabelColor),e.props.updateLabel(e.state.currLabel)})))},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=Object(C.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({currLabel:this.props.statusLabel});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.isUpdateLabelColor,c=(t.currLabel,this.props),s=c.BsDroplet,r=c.statusLabel,o=c.colorsPicker,i=c.idx,l=c.updateLabel,d=c.provided;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",Object(b.a)(Object(b.a)({className:"stat-label-edit-wrapper ".concat(i>5?"sec-column":""),ref:d.innerRef},d.draggableProps),{},{children:[Object(n.jsx)("div",Object(b.a)(Object(b.a)({className:"status-label-dots-btn"},d.dragHandleProps),{},{children:"::"})),Object(n.jsxs)("div",{title:"".concat(r.name),className:"stat-label-edit ".concat(r.name.length>13?"ellipsis-label-name-edit":""),tabindex:"0",children:[a?Object(n.jsx)("span",{className:"edit-label-color",style:{backgroundColor:"".concat(this.state.newLabelColor?this.state.newLabelColor:r.color)},onClick:function(){return e.onToggleUpdateLabelColor(r)},children:Object(n.jsx)(s,{className:"BsDroplet ".concat("black"===r.color?"light-drop-on-dark-color":"")})}):Object(n.jsx)("span",{className:"edit-label-color",style:{backgroundColor:"".concat(r.color)},onClick:function(){return e.onToggleUpdateLabelColor(r)},children:Object(n.jsx)(s,{className:"BsDroplet ".concat("black"===r.color?"light-drop-on-dark-color":"")})}),Object(n.jsx)(Ot,{statusLabel:r,updateLabel:l})]}),Object(n.jsxs)("div",{className:"status-label-delete-btn",onClick:function(){return e.props.onRemoveLabel(r._id)},children:[Object(n.jsx)(ft.c,{}),Object(n.jsx)("span",{className:"label-text-on-top",children:"Delete Labels"})]})]})),a&&Object(n.jsx)("div",{className:"label-color-edit",style:{gridRowStart:i<6?i+2:i-4,gridRowEnd:i<6?i+6:i},children:Object(n.jsx)("div",{className:"status-color-picker",children:o.map((function(t){return Object(n.jsx)("div",{className:"color",style:{backgroundColor:"".concat(t)},onMouseEnter:function(){return e.onChangeNewLabelColor(t)},onMouseLeave:function(){return e.onRemoveNewLabelColor()},onClick:function(){return e.onSaveColor(t)}})}))})})]})}}]),a}(c.Component),vt=["#f368e0","#FC427B","#e84118","#ff6b6b","#ff9f43","#f3a683","#feca57","#fbc531","#4cd137","#1dd1a1","#01a3a4","#48dbfb","#54a0ff","#00a8ff","#487eb0","#273c75","#3B3B98","#341f97","#5f27cd","#9c88ff","#D6A2E8","#ff9ff3","#f8a5c2","#f78fb3","#c8d6e5","#7f8fa6","#353b48","black"],gt=a(38),xt=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={statusLabelList:[],isStatusModalOpen:!1,isEditLabelsModalOpen:!1,newLabelColor:null,isUpdateLabelColor:!1,currLabel:{},hideColorPicker:!1,boardCopy:null},e.toggleStatusModal=function(){e.setState({isStatusModalOpen:!e.state.isStatusModalOpen})},e.closeStatusModal=function(){e.state.isEditLabelsModalOpen||(e.setState({isStatusModalOpen:!1}),e.closeEditLabelsModal())},e.updateTask=function(t,a,n){var c=Object(b.a)(Object(b.a)({},a),{},{status:n});e.props.onEditTask(t,c),e.setState({isStatusModalOpen:!1})},e.openEditLabelsModal=function(){e.setState({isEditLabelsModalOpen:!0})},e.closeEditLabelsModal=function(){e.setState({isEditLabelsModalOpen:!1})},e.onChangeNewLabelColor=function(t){e.setState({newLabelColor:t})},e.onRemoveNewLabelColor=function(){e.setState({newLabelColor:null})},e.onAddNewLabel=function(t){12!==e.props.board.statusLabelList.length&&e.setState({statusLabelList:[].concat(Object(f.a)(e.props.board.statusLabelList),[{_id:(new Date).getTime().toString(),color:t,name:"New Label"}])},(function(){var a=Object(b.a)(Object(b.a)({},e.props.board),{},{statusLabelList:[].concat(Object(f.a)(e.props.board.statusLabelList),[{_id:(new Date).getTime().toString(),color:t,name:"New Label"}])});e.props.onEditBoard(a)}))},e.onRemoveLabel=function(t){var a=e.state.statusLabelList.filter((function(e){return e._id!==t}));e.setState({statusLabelList:a},(function(){var t=Object(b.a)(Object(b.a)({},e.props.board),{},{statusLabelList:a});e.props.onEditBoard(t)}))},e.updateLabel=function(t){var a=e.props.board.statusLabelList.map((function(e){return e._id===t._id?t:e}));e.setState({statusLabelList:a},(function(){var t=Object(b.a)(Object(b.a)({},e.props.board),{},{statusLabelList:a});e.props.onEditBoard(t)}))},e.onToggleUpdateLabelColor=function(t){e.setState({isUpdateLabelColor:!e.state.isUpdateLabelColor}),e.setState({currLabel:t})},e.hideColorPicker=function(t){t?e.setState({hideColorPicker:!0}):e.setState({hideColorPicker:!1})},e.handleDragEnd=function(t){var a=t.destination,n=t.source;if(a&&(a.index!==n.index||a.draggableId!==n.draggableId)){var c=Object(b.a)({},e.props.board.statusLabelList[n.index]);e.setState({boardCopy:Object(b.a)({},e.state.boardCopy)},(function(){return e.state.boardCopy.statusLabelList.splice(n.index,1),e.state.boardCopy.statusLabelList.splice(a.index,0,c),e.state.boardCopy})),e.props.onEditBoard(e.state.boardCopy)}},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=Object(C.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(f.a)(this.props.board.statusLabelList),this.setState({statusLabelList:t}),this.setState({boardCopy:this.props.board});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.isStatusModalOpen,c=t.isEditLabelsModalOpen,s=(t.statusLabelList,t.isUpdateLabelColor,this.props),r=s.task,o=s.table,i=s.taskKey,l=s.FaPencilAlt,d=(s.onEditTask,s.board);return r?Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"table-cell task-cell",tabIndex:"0",onBlur:this.closeStatusModal,children:[Object(n.jsx)("div",{className:"task-cell-status",style:{backgroundColor:"".concat(r.status.color)},onClick:this.toggleStatusModal,children:Object(n.jsx)("div",{className:"cell-content-wrapper",children:r[i].name})}),Object(n.jsxs)("div",{className:"status-container",children:[a&&!c&&Object(n.jsxs)("div",{className:"status-modal-wrapper",children:[Object(n.jsx)("div",{className:"status-label-list-container",children:d.statusLabelList.map((function(t,a){return Object(n.jsx)("div",{title:"".concat(t.name),className:"stat-label ".concat(t.name.length>13?"ellipsis-label-name":""),tabindex:"0",style:{backgroundColor:"".concat(t.color)},onMouseDown:function(){return e.updateTask(o,r,t)},children:t.name})}))}),Object(n.jsxs)("div",{className:"status-label-btn edit-status",onClick:this.openEditLabelsModal,children:[Object(n.jsx)(l,{className:"status-FaPencilAlt"}),Object(n.jsx)("span",{children:"Add/Edit Labels"})]})]}),a&&c&&Object(n.jsxs)("div",{className:"status-modal-wrapper",children:[Object(n.jsx)(gt.a,{onDragEnd:this.handleDragEnd,children:Object(n.jsx)(gt.c,{droppableId:"statusLabelList",children:function(t){return Object(n.jsxs)("div",Object(b.a)(Object(b.a)({className:"status-label-list-container edit ".concat(e.state.hideColorPicker?"updating-the-label":"")},t.droppableProps),{},{ref:t.innerRef,children:[d.statusLabelList.map((function(t,a){return Object(n.jsx)(gt.b,{draggableId:t._id,index:a,children:function(c){return Object(n.jsx)(ht,{provided:c,BsDroplet:Le.c,TiDelete:Le.c,statusLabel:t,colorsPicker:vt,hideColorPicker:e.hideColorPicker,idx:a,onRemoveLabel:e.onRemoveLabel,updateLabel:e.updateLabel})}},t._id)})),d.statusLabelList.length<12&&Object(n.jsx)("div",{className:"add-new-label sec-column ".concat(e.state.newLabelColor?"":"default"),style:{backgroundColor:"".concat(e.state.newLabelColor?e.state.newLabelColor:"transparent")},children:"New Label"}),t.placeholder]}),"statusLabelList")}})}),!this.state.hideColorPicker&&Object(n.jsx)("div",{className:"status-color-picker",children:vt.map((function(t){return Object(n.jsx)("div",{className:"color",style:{backgroundColor:"".concat(t)},onMouseEnter:function(){return e.onChangeNewLabelColor(t)},onMouseLeave:function(){return e.onRemoveNewLabelColor()},onClick:function(){return e.onAddNewLabel(t)}})}))}),Object(n.jsx)("div",{className:"status-label-btn",onClick:this.closeEditLabelsModal,children:Object(n.jsx)("span",{children:"Apply"})})]})]})]})}):Object(n.jsx)("div",{children:"Loading...."})}}]),a}(c.Component),kt=[{name:":alert1:",img:"fas fa-exclamation-circle",customCategory:"FA",class:"green"},{name:":alert2:",img:"fas fa-exclamation-triangle",customCategory:"FA",class:"red"},{name:":alert3:",img:"fas fa-exclamation-triangle",customCategory:"FA",class:"yellow"},{name:":check:",img:"fas fa-check",customCategory:"FA",class:"green"},{name:":times:",img:"fas fa-times",customCategory:"FA",class:"red"},{name:":times:",img:"far fa-smile",customCategory:"FA",class:"gray"},{name:":clock1:",img:"far fa-clock",customCategory:"FA",class:"green"},{name:":clock2:",img:"far fa-clock",customCategory:"FA",class:"red"},{name:":bolt:",img:"fas fa-bolt",customCategory:"FA",class:"blue"},{name:":arrow-r:",img:"fas fa-arrow-right",customCategory:"FA",class:"green"},{name:":arrow-l:",img:"fas fa-arrow-left",customCategory:"FA",class:"red"},{name:":rocket:",img:"fas fa-rocket",customCategory:"FA",class:"blue"},{name:":question:",img:"fas fa-question",customCategory:"FA",class:"green"},{name:":bug:",img:"fas fa-bug",customCategory:"FA",class:"red"},{name:":exclamation:",img:"fas fa-exclamation",customCategory:"FA",class:"gray"},{name:":party_parrot:",imageUrl:"https://emojis.slackmojis.com/emojis/images/1471119458/990/party_parrot.gif?1471119458",customCategory:"Gif"},{name:":pika:",imageUrl:"https://emojis.slackmojis.com/emojis/images/1579216111/7550/pikachu_wave.gif?1579216111",customCategory:"Gif"},{name:":troll:",imageUrl:"https://emojis.slackmojis.com/emojis/images/1463602125/429/troll.png?1463602125",customCategory:"Gif"},{name:":apple:",imageUrl:"https://emojis.slackmojis.com/emojis/images/1614621881/15861/apple_tongue.gif?1614621881",customCategory:"Gif"},{name:":among_us2:",imageUrl:"https://emojis.slackmojis.com/emojis/images/1605479278/11110/crewmate.gif?1605479278",customCategory:"Gif"},{name:":among_us:",imageUrl:"https://emojis.slackmojis.com/emojis/images/1605722420/11386/among_us_orange_dance.gif?1605722420",customCategory:"Gif"},{name:":space_float:",imageUrl:"https://emojis.slackmojis.com/emojis/images/1613270271/12726/space_float.gif?1613270271",customCategory:"Gif"},{name:":rage-poop:",imageUrl:"https://emojis.slackmojis.com/emojis/images/1526489538/3928/rage-poop.png?1526489538",customCategory:"Gif"},{name:":alert:",imageUrl:"https://emojis.slackmojis.com/emojis/images/1497901371/2453/alert.gif?1497901371",customCategory:"Gif"}];function wt(e){var t=e.onEditTask,a=e.table,s=e.task,r=e.setUpdatingText,o=Object(c.useState)(""),i=Object(fe.a)(o,2),l=i[0],d=i[1],u=Object(c.useState)(!1),j=Object(fe.a)(u,2),p=j[0],m=j[1],f=Object(c.useState)(!1),O=Object(fe.a)(f,2),h=O[0],v=O[1],g=Object(c.useRef)();Object(c.useEffect)((function(){s.text&&d(s.text)}),[s]);return Object(n.jsx)("div",{className:"task-text",onClick:function(){m(!0),r(!0),setTimeout((function(){g.current.focus()}),0)},children:p?Object(n.jsxs)("div",{className:"updating-container",children:[Object(n.jsx)("input",{type:"text",onChange:function(e){return d(e.target.value)},value:l,onBlur:function(){var e=Object(b.a)(Object(b.a)({},s),{},{text:l});t(a,e),m(!1),v(!1),r(!1)},ref:g,onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}}),Object(n.jsxs)("span",{className:"".concat(h?"active":""),children:[Object(n.jsx)(Oe.f,{onClick:function(){return v((function(e){return!e}))}}),h&&Object(n.jsx)("div",{className:"modal-default-style text-modal",children:kt.map((function(e){return Object(n.jsx)("span",{onClick:function(){return d((function(t){return t+" "+e.name}))},children:"FA"===e.customCategory?Object(n.jsx)("i",{class:"".concat(e.img," ").concat(e.class," gif-img")}):Object(n.jsx)("img",{src:"".concat(e.imageUrl),className:"gif-img",alt:""})})}))})]})]}):Object(n.jsx)("div",{className:"text-content",children:Object(n.jsx)("span",{className:"dangerouslySetInnerHTML",dangerouslySetInnerHTML:{__html:function(e){var t=e;return kt.forEach((function(e){var a="";switch(e.customCategory){case"FA":a="<i class='".concat(e.img," ").concat(e.class,"'></i>");break;case"Gif":a="\n                    <img src=".concat(e.imageUrl," className='gif-img'></img>\n                    ")}for(var n="";t!==n;){n=t;var c=e.name;t=t.replace(c,a)}})),t}(l)}})})})}function Nt(e){var t=e.onEditTask,a=e.table,s=e.task,r=Object(c.useState)(!1),o=Object(fe.a)(r,2),i=o[0],l=o[1];Object(c.useEffect)((function(){s.checkBox&&l(s.checkBox)}),[s]);return Object(n.jsx)("div",{className:"task-check-box",onClick:function(){return function(e){l(e);var n=Object(b.a)(Object(b.a)({},s),{},{checkBox:e});t(a,n)}(!i)},children:s.checkBox?Object(n.jsx)(Oe.b,{className:"icon green"}):""})}function Ct(e){var t=e.openConversationModal,a=e.task,s=e.table,r=Object(c.useState)(a.conversations),o=Object(fe.a)(r,2),l=o[0],d=o[1],u=Object(i.c)();return Object(c.useEffect)((function(){d(a.conversations)}),[a]),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"task-conversation-wrapper",children:[Object(n.jsx)(ke.b,{className:"conversation-bubble",onClick:function(){u(Ge({taskId:a._id,tableId:s._id})),t()}}),l.length>0&&Object(n.jsx)("div",{className:"conversations-count",children:l.length}),Object(n.jsx)("span",{className:"label-text arrow-down",children:"Start conversation"})]})})}function St(e){var t=e.task,a=e.table,s=e.onEditTask,r=Object(i.c)(),o=Object(i.d)((function(e){return e.user.users})),l=Object(c.useState)(null),d=Object(fe.a)(l,2),u=d[0],j=d[1],p=Object(c.useState)(null),m=Object(fe.a)(p,2),O=m[0],h=m[1],v=Object(c.useState)(""),g=Object(fe.a)(v,2),x=g[0],k=g[1];Object(c.useEffect)((function(){r(Q())}),[r]),Object(c.useEffect)((function(){var e,a,n,c=o.filter((function(e){return t.owner.includes(e._id)})),s=Object(f.a)(t.owner),r=(a=s,n="_id",(e=c).sort((function(e,t){var c=e[n],s=t[n];return a.indexOf(c)>a.indexOf(s)?1:-1})),e);j(r)}),[t,o]),Object(c.useEffect)((function(){if(u){var e=[];u.map((function(t){return e.push(t._id)})),h(o.filter((function(t){return!e.includes(t._id)})))}}),[o,u]);var w=function(e){for(var t=[],a=0;a<e.length;a++)t.push(Object(n.jsx)("span",{className:"".concat(x.toLowerCase().includes(e[a].toLowerCase())?"bold":""),children:e[a]}));return t};function N(){for(var e=[],t=0;t<12;t++)e.push(Object(n.jsx)("span",{className:"title-line",children:"-"}));return e}return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"owners-container",children:u&&u.map((function(e){return Object(n.jsxs)("div",{className:"owner-details",children:[Object(n.jsx)("img",{className:"user-img",src:"".concat(e.avatar),alt:"",srcset:""}),Object(n.jsx)("span",{className:"user-name",children:e.username}),Object(n.jsx)("span",{className:"remove-user",onClick:function(){return function(e){var n=Object(b.a)(Object(b.a)({},t),{},{owner:t.owner.filter((function(t){return t!==e}))});s(a,n)}(e._id)},children:"x"})]})}))}),Object(n.jsx)("input",{type:"text",placeholder:"Enter name",className:"owner-modal-input",onChange:function(e){return k(e.target.value)}}),Object(n.jsxs)("div",{className:"title",children:[N(),Object(n.jsx)("span",{className:"title-contant",children:" People "}),N()]}),O&&O.map((function(e){return e.username.toLowerCase().includes(x.toLowerCase())?Object(n.jsxs)("div",{className:"user-details",onClick:function(){return function(e){var n=Object(b.a)(Object(b.a)({},t),{},{owner:[].concat(Object(f.a)(t.owner),[e])});s(a,n)}(e._id)},children:[Object(n.jsx)("img",{className:"user-img",src:"".concat(e.avatar),alt:"",srcset:""}),Object(n.jsx)("span",{className:"user-name",children:w(e.username)})]}):null}))]})}var yt=a(54);function Bt(e){var t=e.task,a=e.taskKeys,r=e.table,o=e.board,l=e.onEditBoard,d=e.provided,u=e.isDragging,j=e.openConversationModal,p=e.onEditTable,m=e.onEditTask,O=e.unCheckTasks,h=Object(i.d)((function(e){return e.user.users})),v=Object(i.d)((function(e){return e.user.loggedInUser})),g=Object(i.d)((function(e){return e.workspace.checkedTasks})),x=Object(c.useState)(t),k=Object(fe.a)(x,2),w=k[0],S=k[1],y=Object(c.useState)(!1),B=Object(fe.a)(y,2),T=B[0],_=B[1],E=Object(c.useState)(!1),L=Object(fe.a)(E,2),A=L[0],F=L[1],D=Object(c.useState)(!1),I=Object(fe.a)(D,2),W=I[0],U=I[1],M=Object(c.useState)(!1),R=Object(fe.a)(M,2),P=R[0],G=R[1],K=Object(c.useState)((new Date).getTime()),V=Object(fe.a)(K,2),H=(V[0],V[1],Object(c.useState)("")),z=Object(fe.a)(H,2),J=z[0],q=(z[1],Object(c.useState)(!1)),X=Object(fe.a)(q,2),Z=X[0],Y=X[1],$=Object(c.useState)(t.owner),ee=Object(fe.a)($,2),te=ee[0],ae=ee[1],ne=Object(c.useRef)(),ce=Object(c.useRef)(),se=Object(c.useRef)(null),re=Object(i.c)();Object(c.useEffect)((function(){re(Q())}),[re]),Object(c.useEffect)((function(){var e,a,n,c=h.filter((function(e){return t.owner.includes(e._id)})),s=Object(f.a)(t.owner),r=(a=s,n="_id",(e=c).sort((function(e,t){var c=e[n],s=t[n];return a.indexOf(c)>a.indexOf(s)?1:-1})),e);ae(r)}),[t,h,v]),Object(c.useEffect)((function(){var e,a={_id:t._id,table:r};re(Z?function(e){return function(){var t=Object(C.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"ADD_CHECKED_TASK",currCheckedTask:e})}catch(n){console.log("WorkspaceActions: err in ADD_CHECKED_TASK",n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(a):(e=t._id,function(){var t=Object(C.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"REMOVE_CHECKED_TASK",taskId:e})}catch(n){console.log("WorkspaceActions: err in REMOVE_CHECKED_TASK",n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[Z,re,t._id,r]),Object(c.useEffect)((function(){O&&Y(!1)}),[O]),Object(c.useEffect)((function(){S(t)}),[t]),Object(c.useEffect)((function(){T&&setTimeout((function(){ce.current.focus()}),0)}),[T]),Object(c.useEffect)((function(){A&&(S(t),ne.current.focus())}),[A,t]);var oe=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},ie=function(e){S(Object(b.a)(Object(b.a)({},w),{},{name:e.target.value}))},le=function(e){var a=[];switch(e){case"name":a.push(Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsxs)("div",{className:"task-name-wrapper",children:[Object(n.jsx)("span",{className:"task-name-span ".concat(A?"task-name-span-updating":""),children:A?Object(n.jsx)("input",{className:"task-name",onFocus:oe,type:"text",name:"name",ref:ne,value:w[e],onChange:ie,onBlur:function(){var e=Object(b.a)(Object(b.a)({},t),{},{name:w.name});m(r,e),F(!1)},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}}):Object(n.jsx)("span",{onClick:function(){re(Ge({taskId:t._id,tableId:r._id})),j()},children:t[e]})}),Object(n.jsx)(Oe.c,{className:"FaPencilAlt",onClick:function(){F(!0)}})]}),Object(n.jsx)(Ct,{table:r,task:t,openConversationModal:j})]}));break;case"owner":a.push(Object(n.jsxs)("div",{className:"add-owner-btn-wrapper ".concat(t[e].length>0?"add-more":"add-first"),children:[Object(n.jsx)(Le.l,{className:"add-owner ".concat(W?"active":"")}),W&&Object(n.jsx)("div",{className:"modal-default-style owner-modal",ref:se,tabIndex:"0",onBlur:function(){return U(!1)},children:Object(n.jsx)(St,{task:t,onEditTask:m,table:r,setToggleOwnerModal:U})})]})),t[e].length>0&&te.length>0?a.push(Object(n.jsxs)("div",{className:"owner-container",children:[Object(n.jsx)("div",{className:"owner-avatar-wrapper",children:Object(n.jsx)("img",{src:"".concat(te[0].avatar),alt:""})}),t[e].length>1?Object(n.jsxs)("div",{className:"owners-count",children:["+",t[e].length-1]}):null]})):a.push(Object(n.jsx)(Oe.h,{style:{width:"30px",height:"30px",color:"rgb(180, 182, 188)"}}));break;case"createdAt":if(t[e]){var c=new Date(t[e]),o=c.getMonth()+1,i=c.getDate();a.push(Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)("span",{className:"month",children:de(o)}),Object(n.jsx)("span",{className:"day",children:i})]}))}else a.push("Jan 22");break;case"text":a.push(Object(n.jsx)(wt,{onEditTask:m,task:t,table:r,setUpdatingText:G}));break;case"checkBox":a.push(Object(n.jsx)(Nt,{onEditTask:m,task:t,table:r}));break;case"lastUpdated":t[e]&&a.push(Object(n.jsx)("div",{className:"last-updated-task-container",children:J}));break;default:a.push(t[e])}return a};function de(e){switch(e){case 1:return"Jan";case 2:return"Feb";case 3:return"Mar";case 4:return"Apr";case 5:return"May";case 6:return"June";case 7:return"July";case 8:return"Aug";case 9:return"Sept";case 10:return"Oct";case 11:return"Nov";case 12:return"Dec";default:return"foo"}}var ue=function(e){switch(e){case"text":return"text-style";case"checkBox":return"checkBox-style";default:return""}};return t?Object(n.jsxs)("div",Object(b.a)(Object(b.a)(Object(b.a)({className:"table-row-wrapper ".concat(u?"task-dragging":""),ref:d.innerRef},d.draggableProps),d.dragHandleProps),{},{children:[Object(n.jsx)("div",{className:"options-wrapper",children:Object(n.jsxs)("div",{className:"options-btn ".concat(T?"options-btn-visible":""),onClick:function(){return _(!0)},tabIndex:"0",ref:ce,onBlur:function(){return _(!1)},children:[Object(n.jsx)("div",{className:"TiArrowSortedDown-wrapper   TiArrowSortedDown-task-wrapper",children:Object(n.jsx)(ft.a,{})}),T&&Object(n.jsxs)("div",{className:"options-modal task-options-modal",children:[Object(n.jsxs)("div",{className:"modal-btn item-actions-btn",children:[Object(n.jsx)(Oe.c,{className:"icon"}),Object(n.jsx)("span",{onClick:function(){F(!0),_(!1)},children:"Rename Item"})]}),Object(n.jsx)("div",{className:"delete-btn-wrapper",children:Object(n.jsxs)("div",{className:"modal-btn item-actions-btn",onClick:function(){return function(e){var t=Object(b.a)(Object(b.a)({},r),{},{tasks:r.tasks.filter((function(t){return t._id!==e._id}))});p(t),_(!1)}(t)},children:[Object(n.jsx)(Le.r,{className:"icon"}),Object(n.jsx)("span",{children:"Delete"})]})})]})]})}),Object(n.jsxs)("div",{className:"table-row task-row",children:[a.map((function(e){return"status"===e?Object(n.jsx)(xt,{taskKey:e,task:t,table:r,FaPencilAlt:Oe.c,onEditTask:m,board:o,onEditBoard:l}):Object(n.jsxs)("div",{className:"table-cell task-cell ".concat(ue(e)," ").concat(P?"updating-text":""),onClick:function(){"owner"===e&&(U((function(e){return!e})),se.current&&se.current.focus())},children:[Object(n.jsx)("div",{className:"decoration-line task-line ".concat(g.length>0?"open":""),style:{backgroundColor:"".concat(r.color)},children:Object(n.jsx)("div",{className:"task-line-square ".concat(Z?"checked":""),onClick:function(){return Y((function(e){return!e}))},children:Z&&Object(n.jsx)(yt.a,{style:{color:"".concat(r.color)}})})}),Object(n.jsx)("div",{className:"cell-content-wrapper ".concat("name"===e?"name-wrapper-cell":""),children:le(e)})]})})),Object(n.jsx)("div",{className:"table-cell task-cell"})]})]})):Object(n.jsx)("div",{children:"Loading...."})}var Tt=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(S.a)(this,a);for(var c=arguments.length,s=new Array(c),r=0;r<c;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={table:{},board:{},currTableColumn:{},isDivOnFocus:!1},e.focusText=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},e.handleChangeGroupName=function(t){e.setState({table:Object(b.a)(Object(b.a)({},e.state.table),{},{name:t.target.value})})},e.handleChangeGroupTitle=function(t){e.setState({currTableColumn:Object(b.a)(Object(b.a)({},e.props.tableColumn),{},{title:t.target.value})},(function(){e.setState({board:Object(b.a)(Object(b.a)({},e.props.board),{},{tableColumns:e.props.board.tableColumns.map((function(t){return t._id===e.state.currTableColumn._id?e.state.currTableColumn:t}))})})}))},e.toggleFocusOnDiv=function(t){e.setState({isDivOnFocus:t})},e.changeToContentEditable=function(t){var a=e.props.dragHandle,c=[];return"name"===t.taskKey?c.push(Object(n.jsxs)("div",{className:"".concat(e.props.isOpenTableColorModal?"":"table-name-wrapper"),tabIndex:"0",onClick:function(){return e.toggleFocusOnDiv(!0)},onBlur:function(){e.toggleFocusOnDiv(!1),e.props.closeTableColorModal()},children:[Object(n.jsxs)("div",{className:"table-actions",children:[e.props.isExpand?Object(n.jsx)(Ae.g,{className:"shrink-btn",onClick:function(){return e.props.toggleExpandeTable(!1)}}):Object(n.jsx)(Qe.b,{className:"expand-btn",onClick:function(){return e.props.toggleExpandeTable(!0)}}),Object(n.jsx)("div",Object(b.a)(Object(b.a)({className:"drag-btn"},a.dragHandleProps),{},{children:Object(n.jsx)(he.c,{})}))]}),Object(n.jsx)(lt.a,{onFocus:e.focusText,className:"content-editable ".concat(e.props.isOpenTableColorModal?"focus":""),innerRef:e.editableGroupName,html:e.state.table.name,disabled:!1,onChange:e.handleChangeGroupName,onBlur:function(){if(e.props.table.name!==e.state.table.name){var t=Object(b.a)(Object(b.a)({},e.props.table),{},{name:e.state.table.name});e.props.onEditTable(t)}},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}})]})):c.push(Object(n.jsx)(lt.a,{onFocus:e.focusText,className:"content-editable",innerRef:e.editableGroupTitle,html:e.state.currTableColumn.title,disabled:!1,onChange:e.handleChangeGroupTitle,onBlur:function(){if(e.props.tableColumn.title!==e.state.currTableColumn.title){var t=Object(b.a)(Object(b.a)({},e.props.board),{},{tableColumns:Object(f.a)(e.state.board.tableColumns)});e.props.onEditBoard(t)}},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}})),c},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.setState({table:this.props.table}),this.setState({board:this.props.board}),this.setState({currTableColumn:this.props.tableColumn}),this.editableGroupName=s.a.createRef(),this.editableGroupTitle=s.a.createRef()}},{key:"componentDidUpdate",value:function(e,t){t.currTableColumn.title!==this.state.currTableColumn.title&&this.setState({board:this.props.board}),e.tableColumn.title!==this.props.tableColumn.title&&this.setState({board:this.props.board}),e.board!==this.props.board&&(this.setState({board:this.props.board}),this.setState({currTableColumn:this.props.tableColumn}))}},{key:"render",value:function(){var e=this.props,t=(e.board,e.tableColumn),a=e.table,c=e.IoMdNotifications;return t?Object(n.jsx)("div",{className:"table-cell title-cell ".concat("checkBox"===t.taskKey?"checkBox-title":""),style:{color:"".concat(a.color)},children:"createdAt"===t.taskKey?Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(c,{style:{width:"18px",height:"18px"}}),Object(n.jsx)("span",{children:this.changeToContentEditable(t)})]}):this.changeToContentEditable(t)},t._id):Object(n.jsx)("div",{children:"Loading...."})}}]),a}(c.Component),_t=a(134);function Et(e){var t=e.taskKeys,a=e.table,s=e.IoMdNotifications,r=e.HiPlusCircle,o=e.onAddNewTask,l=e.onEditTask,d=e.onEditTable,u=e.onEditBoard,j=e.onRemoveTask,p=e.removeTable,m=e.openConversationModal,O=e.dragHandle,h=e.isDragging,v=e.isShrink,g=e.onShrink,x=e.search,k=e.unCheckTasks,w=(e.provided,Object(i.d)((function(e){return e.user.users}))),N=Object(i.d)((function(e){return e.workspace.currBoard})),C=Object(c.useState)(""),S=Object(fe.a)(C,2),y=S[0],B=S[1],T=Object(c.useState)(!1),_=Object(fe.a)(T,2),E=_[0],L=_[1],A=Object(c.useState)(!1),F=Object(fe.a)(A,2),D=F[0],I=F[1],W=Object(c.useState)(!1),U=Object(fe.a)(W,2),M=U[0],R=U[1],P=Object(c.useState)(!1),G=Object(fe.a)(P,2),K=G[0],V=G[1],H=Object(c.useState)(a),z=Object(fe.a)(H,2),J=z[0],q=z[1],X=Object(c.useState)(!0),Z=Object(fe.a)(X,2),Y=Z[0],$=Z[1],ee=Object(c.useState)([]),te=Object(fe.a)(ee,2),ae=te[0],ne=te[1],ce=Object(c.useState)({}),se=Object(fe.a)(ce,2),re=se[0],oe=se[1],ie=Object(c.useState)([]),le=Object(fe.a)(ie,2),de=le[0],ue=le[1],be=Object(c.useState)([]),je=Object(fe.a)(be,2),pe=je[0],me=je[1],ve=Object(c.useRef)(null),ge=Object(c.useState)(!1),xe=Object(fe.a)(ge,2),we=xe[0],Ce=xe[1],ye=Object(i.c)();Object(c.useEffect)((function(){ye(Q())}),[ye]),Object(c.useEffect)((function(){var e=[];a.tasks.map((function(t){return e=[].concat(Object(f.a)(e),Object(f.a)(t.owner))}));var t=Object(f.a)(new Set(e));ne(w.filter((function(e){return t.includes(e._id)})))}),[a,a.tasks,y,w]),Object(c.useEffect)((function(){var e=[],t=[];a.tasks.map((function(a,n){e=[].concat(Object(f.a)(e),[a.status]),t=[].concat(Object(f.a)(t),[a.status.name])}));var n=e.sort((function(e,t){return e.name.localeCompare(t.name)}));me(e.length);var c=t.sort((function(e,t){return e.localeCompare(t)})),s=Object(f.a)(new Set(c));ue(s);var r={};s.map((function(e){return r["".concat(e)]={num:n.filter((function(t){return t.name===e})).length,color:n.filter((function(t){return t.name===e}))[0].color}})),oe(r)}),[a,a.tasks]),Object(c.useEffect)((function(){q(a)}),[a]),Object(c.useEffect)((function(){$(!v)}),[v]),Object(c.useEffect)((function(){g(h)}),[h,g]);var Be=function(e){$(e)},Te=function(){B("")},_e=function(){R((function(e){return!e}))};Object(c.useEffect)((function(){K&&ve.current.focus()}),[K]);var Ee=function(){V(!1)};function Fe(e){var t={},a={};switch(e){case"People":t={_id:Date.now(),title:"People",type:"People",taskKey:"owner"},a=Object(b.a)(Object(b.a)({},N),{},{tableColumns:[].concat(Object(f.a)(N.tableColumns),[t])}),u(a);break;case"Status":t={_id:Date.now(),title:"Status",type:"Status",taskKey:"status"},a=Object(b.a)(Object(b.a)({},N),{},{tableColumns:[].concat(Object(f.a)(N.tableColumns),[t])}),u(a);break;case"Date":t={_id:Date.now(),title:"Date",type:"Date",taskKey:"createdAt"},a=Object(b.a)(Object(b.a)({},N),{},{tableColumns:[].concat(Object(f.a)(N.tableColumns),[t])}),u(a);break;case"Text":t={_id:Date.now(),title:"Text",type:"Text",taskKey:"text"},a=Object(b.a)(Object(b.a)({},N),{},{tableColumns:[].concat(Object(f.a)(N.tableColumns),[t])}),u(a);break;case"CheckBox":t={_id:Date.now(),title:"Check Box",type:"CheckBox",taskKey:"checkBox"},a=Object(b.a)(Object(b.a)({},N),{},{tableColumns:[].concat(Object(f.a)(N.tableColumns),[t])}),u(a);break;case"LastUpdated":t={_id:Date.now(),title:"Last Updated",type:"LastUpdated",taskKey:"lastUpdated"},a=Object(b.a)(Object(b.a)({},N),{},{tableColumns:[].concat(Object(f.a)(N.tableColumns),[t])}),u(a)}Ce(!1)}return a&&N?Object(n.jsx)(gt.a,{onDragEnd:function(e){var t=e.destination,n=e.source;if(t&&(t.index!==n.index||t.draggableId!==n.draggableId)){var c=Object(b.a)({},a.tasks[n.index]);q((function(e){return(e=Object(b.a)({},e)).tasks.splice(n.index,1),e.tasks.splice(t.index,0,c),e})),d(J)}},children:Y?Object(n.jsxs)("div",{className:"table",children:[Object(n.jsxs)("div",{className:"title-row-wrapper",children:[Object(n.jsxs)("div",{className:"options-wrapper",tabIndex:"0",onBlur:function(){return I(!1)},children:[Object(n.jsx)("div",{className:"title-options-btn",onMouseEnter:_e,onMouseLeave:_e,children:Object(n.jsx)("div",{className:"TiArrowSortedDown-wrapper TiArrowSortedDown-title-wrapper ".concat(D?"active":""),style:M?{backgroundColor:"white",borderColor:"".concat(a.color)}:{backgroundColor:"".concat(a.color)},onClick:function(){return I((function(e){return!e}))},children:Object(n.jsx)(ft.a,{className:"TiArrowSortedDown-title ".concat(D?"active":""),style:M?{color:"".concat(a.color)}:{color:"white"}})})}),D&&Object(n.jsxs)("div",{className:"options-modal title-options-modal",children:[Object(n.jsxs)("div",{className:"modal-btn item-actions-btn",children:[Object(n.jsx)(Oe.c,{className:"icon"}),Object(n.jsx)("span",{children:"Rename Group-erorr"})]}),Object(n.jsxs)("div",{className:"modal-btn item-actions-btn",onClick:function(){V(!0),I(!1)},children:[Object(n.jsx)(Le.b,{className:"icon",style:{color:a.color}}),Object(n.jsx)("span",{children:"Change Group Color"})]}),Object(n.jsx)("div",{className:"delete-btn-wrapper",children:Object(n.jsxs)("div",{className:"modal-btn item-actions-btn",onClick:function(){var e;e=a._id,p(e),I(!1)},children:[Object(n.jsx)(Le.r,{className:"icon"}),Object(n.jsx)("span",{children:"Delete"})]})})]})]}),K&&Object(n.jsxs)("div",{className:"table-color-modal",ref:ve,tabIndex:"0",onBlur:function(){return V(!1)},children:[Object(n.jsx)("div",{className:"first-section",children:Object(n.jsx)(Le.b,{className:"group-color",style:{color:a.color}})}),Object(n.jsx)("div",{className:"second-section",children:vt.map((function(e){return Object(n.jsx)("div",{className:"color",style:{backgroundColor:"".concat(e)},onClick:function(){return function(e){var t=Object(b.a)(Object(b.a)({},a),{},{color:e});d(t),V(!1)}(e)}})}))})]}),Object(n.jsxs)("div",{className:"table-row title-row",children:[N.tableColumns.map((function(e){return Object(n.jsx)(Tt,{board:N,tableColumn:e,table:a,IoMdNotifications:s,onEditTable:d,onEditBoard:u,isOpenTableColorModal:K,closeTableColorModal:Ee,toggleExpandeTable:Be,isExpand:Y,dragHandle:O})})),Object(n.jsxs)("div",{className:"table-cell title-cell",tabIndex:"0",onBlur:function(){Ce(!1)},children:[Object(n.jsx)(r,{className:"add-column-btn",onClick:function(){Ce((function(e){return!e}))}}),we&&Object(n.jsxs)("div",{className:"modal-default-style new-column-modal",children:[Object(n.jsx)("div",{className:"title",children:"Essentials"}),Object(n.jsxs)("div",{className:"column-types-container",children:[Object(n.jsxs)("div",{onClick:function(){return Fe("Status")},children:[Object(n.jsx)(yt.c,{className:"icon"}),Object(n.jsx)("span",{children:"Status"})]}),Object(n.jsxs)("div",{onClick:function(){return Fe("Dropdown")},children:[Object(n.jsx)(Le.a,{className:"icon"}),Object(n.jsx)("span",{children:"Dropdown"})]}),Object(n.jsxs)("div",{onClick:function(){return Fe("Text")},children:[Object(n.jsx)(ke.f,{className:"icon"}),Object(n.jsx)("span",{children:"Text"})]}),Object(n.jsxs)("div",{onClick:function(){return Fe("Date")},children:[Object(n.jsx)(Se.b,{className:"icon"}),Object(n.jsx)("span",{children:"Date"})]}),Object(n.jsxs)("div",{onClick:function(){return Fe("People")},children:[Object(n.jsx)(Le.j,{className:"icon"}),Object(n.jsx)("span",{children:"People"})]}),Object(n.jsxs)("div",{onClick:function(){return Fe("Numbers")},children:[Object(n.jsx)(ft.d,{className:"icon"}),Object(n.jsx)("span",{children:"Numbers"})]})]}),Object(n.jsx)("div",{className:"title",children:"Super Useful"}),Object(n.jsxs)("div",{className:"column-types-container",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)(_t.a,{className:"icon"}),Object(n.jsx)("span",{children:"Timeline"})]}),Object(n.jsxs)("div",{onClick:function(){return Fe("LastUpdated")},children:[Object(n.jsx)(Se.f,{className:"icon"}),Object(n.jsx)("span",{children:"Last Updated"})]}),Object(n.jsxs)("div",{onClick:function(){return Fe("CheckBox")},children:[Object(n.jsx)(Ne.h,{className:"icon"}),Object(n.jsx)("span",{children:"Check box"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(at.a,{className:"icon"}),Object(n.jsx)("span",{children:"Tags"})]})]})]})]})]})]}),a.tasks.map((function(e,c){return e.name.toLowerCase().includes(x.toLowerCase())?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(gt.c,{droppableId:"droppable-".concat(c),children:function(s,r){return Object(n.jsxs)("div",Object(b.a)(Object(b.a)({className:"task-droppable-container ".concat(r.isDraggingOver?"droppable":"")},s.droppableProps),{},{ref:s.innerRef,children:[Object(n.jsx)(gt.b,{draggableId:e._id,index:c,children:function(c,s){return Object(n.jsx)(Bt,{isDragging:s.isDragging,isDraggingOver:s.isDraggingOver,provided:c,task:e,taskKeys:t,table:a,onEditTask:l,onRemoveTask:j,onEditTable:d,board:N,onEditBoard:u,openConversationModal:m,unCheckTasks:k})}},e._id),s.placeholder]}))}})}):null})),Object(n.jsxs)("div",{className:"table-row add-row",children:[Object(n.jsxs)("div",{className:"table-cell add-cell",children:[Object(n.jsx)("div",{className:"decoration-line",style:{backgroundColor:"".concat(a.color)}}),Object(n.jsx)("input",{type:"text",placeholder:"+ Add",className:"add-new-task-input ".concat(a.tasks.length>0?"":"new-table-input"),onChange:function(e){return function(e){B(e.target.value)}(e)},value:y,onKeyUp:function(e){!function(e,t,a){13===e.keyCode&&(e.preventDefault(),o(t,a),B(""))}(e,a,y)},onFocus:function(e){L(!0)},onBlur:function(e){return L(!1),void Te()}}),E&&Object(n.jsx)("div",{className:"add-new-task-btn ".concat(y.split(" ").join("").length>0?"active":""),onMouseDown:function(){return o(a,y)},children:"Add"})]}),Object(n.jsx)("div",{className:"table-cell add-cell"})]}),Object(n.jsxs)("div",{className:"table-row sum-row",children:[t.map((function(e){return"status"===e?Object(n.jsx)("div",{className:"table-cell sum-cell sum-cell-content-wrapper",children:Object(n.jsx)("div",{className:"sum-status-wrapper",children:de.map((function(e,t){return Object(n.jsx)("span",{style:{backgroundColor:"".concat(re["".concat(e)].color),width:"".concat(re["".concat(e)].num/pe*100,"%")},children:Object(n.jsxs)("span",{className:"label-text arrow-down status-label",children:[Object(n.jsx)("span",{children:""===e?"Empty":e}),Object(n.jsxs)("span",{children:[re["".concat(e)].num,"/",pe]}),Object(n.jsxs)("span",{children:[Math.round(re["".concat(e)].num/pe*100),"%"]})]})},t)}))})}):"owner"===e?Object(n.jsx)("div",{className:"table-cell sum-cell sum-cell-content-wrapper",children:ae.length>0&&Object(n.jsxs)("div",{className:"owner-container",children:[Object(n.jsx)("div",{className:"owner-avatar-wrapper",children:Object(n.jsx)("img",{src:"".concat(ae[0].avatar),alt:""})}),ae.length>1?Object(n.jsxs)("div",{className:"owners-count",children:["+",ae.length-1]}):null]})}):"checkBox"===e?Object(n.jsx)("div",{className:"table-cell sum-cell checkbox-sum-cell"}):Object(n.jsx)("div",{className:"table-cell sum-cell"})})),Object(n.jsx)("div",{className:"table-cell sum-cell"})]})]},a._id):Object(n.jsx)("div",{className:"table ".concat(Y?"":"shrink"),children:Object(n.jsx)("div",{className:"title-row-wrapper",children:Object(n.jsx)("div",{className:"table-cell title-cell",style:{color:"".concat(a.color)},children:Object(n.jsxs)("div",{className:"".concat(K?"":"table-name-wrapper"),tabIndex:"0",onBlur:function(){Ee()},children:[Object(n.jsxs)("div",{className:"table-actions",children:[Y?Object(n.jsx)(Ae.g,{className:"shrink-btn",onClick:function(){return Be(!1)}}):Object(n.jsx)(Qe.b,{className:"expand-btn",onClick:function(){return Be(!0)}}),Object(n.jsx)("div",Object(b.a)(Object(b.a)({className:"drag-btn"},O.dragHandleProps),{},{children:Object(n.jsx)(he.c,{})}))]}),Object(n.jsx)("span",{children:a.name})]})})})},a._id)}):Object(n.jsx)("div",{children:"Loading...."})}var Lt=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={board:null,isShrink:!1,unCheckTasks:!1},e.onShrink=function(t){e.setState({isShrink:t})},e.handleDragEnd=function(t){var a=t.destination,n=t.source;if(a&&(a.index!==n.index||a.draggableId!==n.draggableId)){var c=Object(b.a)({},e.props.board.tables[n.index]);e.setState({board:Object(b.a)({},e.state.board)},(function(){return e.state.board.tables.splice(n.index,1),e.state.board.tables.splice(a.index,0,c),e.state.board})),e.props.onEditBoard(e.state.board)}},e.onRemoveCheckedTasks=function(){var t=[],a=[];e.props.checkedTasks.forEach((function(e){t.push(e._id),a.push(e.table)})),a.forEach((function(a){var n=Object(b.a)(Object(b.a)({},a),{},{tasks:a.tasks.filter((function(e){return!t.includes(e._id)}))});e.props.onEditTable(n)})),e.setState({unCheckTasks:!0})},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.setState({board:this.props.board})}},{key:"componentDidUpdate",value:function(e){e.board!==this.props.board&&this.setState({board:this.props.board}),e.checkedTasks!==this.props.checkedTasks&&this.props.checkedTasks.length<1&&this.setState({unCheckTasks:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.board,c=t.getTaskValue,s=t.removeTable,r=t.onAddNewTask,o=t.onEditTask,i=t.onEditTable,l=t.onEditBoard,d=t.onRemoveTask,u=t.openConversationModal,j=t.search,p=this.props.board.tableColumns.map((function(e){return e.taskKey}));return a?Object(n.jsx)(gt.a,{onDragEnd:this.handleDragEnd,children:Object(n.jsx)(gt.c,{droppableId:a._id,children:function(t){return Object(n.jsxs)("div",Object(b.a)(Object(b.a)({className:"board-main"},t.droppableProps),{},{ref:t.innerRef,children:[a.tables.map((function(t,a){return Object(n.jsx)(gt.b,{draggableId:t._id,index:a,children:function(a,m){return Object(n.jsx)("div",Object(b.a)(Object(b.a)({className:"table-wrapper ".concat(e.state.isShrink?"shrink":""),ref:a.innerRef},a.draggableProps),{},{children:Object(n.jsx)(Et,{isDragging:m.isDragging,dragHandle:a,taskKeys:p,table:t,getTaskValue:c,IoMdNotifications:Ne.i,HiPlusCircle:at.e,BsPlus:Le.k,onAddNewTask:r,onEditTask:o,onEditTable:i,onEditBoard:l,onRemoveTask:d,removeTable:s,openConversationModal:u,isShrink:e.state.isShrink,onShrink:e.onShrink,search:j,unCheckTasks:e.state.unCheckTasks})}))}},t._id)})),t.placeholder,e.props.checkedTasks.length>0&&Object(n.jsxs)("div",{className:"multiple-actions-modal slide-top",children:[Object(n.jsx)("div",{className:"items-count-wrapper",children:e.props.checkedTasks.length}),Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"middle-section",children:[Object(n.jsxs)("div",{className:"selected-items",children:[Object(n.jsxs)("div",{className:"title",children:["Item","".concat(e.props.checkedTasks.length>1?"s":"")," selected"]}),Object(n.jsx)("div",{className:"dots-container",children:e.props.checkedTasks.map((function(e){return Object(n.jsx)("div",{className:"dot"})}))})]}),Object(n.jsxs)("div",{className:"options-wrapper",children:[Object(n.jsxs)("div",{className:"option-btn",children:[Object(n.jsx)(at.b,{className:"icon"}),Object(n.jsx)("div",{className:"name",children:"Duplicate"})]}),Object(n.jsxs)("div",{className:"option-btn",children:[Object(n.jsx)(Le.q,{className:"icon",onClick:e.onRemoveCheckedTasks}),Object(n.jsx)("div",{className:"name",children:"Delete"})]}),Object(n.jsxs)("div",{className:"option-btn",children:[Object(n.jsx)(ke.a,{className:"icon"}),Object(n.jsx)("div",{className:"name",children:"Move tp"})]})]})]})}),Object(n.jsx)("div",{className:"close-btn",onClick:function(){return e.setState({unCheckTasks:!0})},children:Object(n.jsx)(Se.a,{})})]})]}),a._id)}})}):Object(n.jsx)("div",{children:"Loading...."})}}]),a}(c.Component),At={loadWorkspaces:Me,updateWorkspace:Re,updateCurrBoard:Ke},Ft=Object(i.b)((function(e){return{workspaces:e.workspace.workspaces,board:e.workspace.currBoard,loggedInUser:e.user.loggedInUser,checkedTasks:e.workspace.checkedTasks}}),At)(Object(k.g)(Lt));function Dt(e){var t=e.updateWorkspace,a=e.deleteWorkspace,s=Object(i.d)((function(e){return e.workspace.currWorkspace})),r=Object(c.useState)(!1),o=Object(fe.a)(r,2),l=o[0],d=o[1],u=Object(c.useState)(!1),j=Object(fe.a)(u,2),p=j[0],m=j[1],f=Object(c.useState)(s.color),O=Object(fe.a)(f,2),h=O[0],v=O[1],g=Object(c.useState)(s.img),x=Object(fe.a)(g,2),k=x[0],w=x[1],N=Object(c.useState)(!1),C=Object(fe.a)(N,2),S=C[0],y=C[1],B=Object(c.useState)(s.name),T=Object(fe.a)(B,2),_=T[0],E=T[1],L=Object(c.useState)(!1),A=Object(fe.a)(L,2),F=A[0],D=A[1],I=Object(c.useState)(s.desc),W=Object(fe.a)(I,2),U=W[0],M=W[1],R=Object(c.useRef)(),P=Object(c.useRef)();function G(){D(!0),setTimeout((function(){P.current.focus(),P.current.select()}),0)}return Object(c.useEffect)((function(){v(s.color),w(s.img),E(s.name),M(s.desc)}),[s]),Object(n.jsxs)("div",{className:"new-workspace-board-main-wrapper",children:[Object(n.jsxs)("div",{className:"workspace-icon",style:{backgroundColor:"".concat(h)},onClick:function(){d(!0)},tabIndex:"0",onBlur:function(){if(h!==s.color||k!==s.img){var e=Object(b.a)(Object(b.a)({},s),{},{img:k,color:h});t(e)}d(!1)},children:[k,!l&&Object(n.jsxs)("div",{className:"workspace-icon-edit",children:[Object(n.jsx)("div",{children:Object(n.jsx)(Oe.c,{className:"workspace-edit-pencil"})}),Object(n.jsx)("div",{children:"Edit"})]}),l&&Object(n.jsx)("div",{className:" modal-default-style workspace-icon-modal",children:Object(n.jsx)(Ze,{updateWorkspace:t})})]}),Object(n.jsxs)("div",{className:"content-wrapper",children:[Object(n.jsxs)("div",{className:"workspace-name-container",children:[Object(n.jsx)("div",{className:"name-wrapper  ".concat(S?"updating":""),onClick:function(){y(!0),setTimeout((function(){R.current.focus(),R.current.select()}),0)},children:S?Object(n.jsx)("input",{className:"update-workspace-input",type:"text",value:_,onChange:function(e){E(e.target.value)},ref:R,onBlur:function(){if(y(!1),_!==s.name){var e=Object(b.a)(Object(b.a)({},s),{},{name:_});t(e)}},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}}):Object(n.jsx)("div",{children:_})}),Object(n.jsxs)("div",{className:"workspace-options-container",tabIndex:"0",onBlur:function(){return m(!1)},children:[Object(n.jsx)(Le.p,{className:"workspace-dots ".concat(p?"open":""),onClick:function(){return m((function(e){return!e}))}}),p&&Object(n.jsxs)("div",{className:" modal-default-style workspace-options-modal",children:[Object(n.jsxs)("div",{className:"modal-btn workspace-options-btn",onClick:function(){G(),m(!1)},children:[Object(n.jsx)(Oe.c,{className:"icon"}),Object(n.jsx)("span",{children:"Rename workspace"})]}),Object(n.jsxs)("div",{className:"modal-btn workspace-options-btn",onClick:function(){a(s._id),m(!1)},children:[Object(n.jsx)(Le.r,{className:"icon"}),Object(n.jsx)("span",{children:"Delete workspace"})]})]})]})]}),Object(n.jsx)("div",{className:"desc-wrapper ".concat(F?"updating":""),onClick:G,children:F?Object(n.jsx)("input",{className:"update-workspace-input",type:"text",value:U,onChange:function(e){M(e.target.value)},ref:P,onBlur:function(){if(D(!1),U!==s.desc){var e=Object(b.a)(Object(b.a)({},s),{},{desc:U});t(e)}},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}}):Object(n.jsx)("div",{children:U})})]})]})}function It(e){var t=e.isNewWorkspaceCreated,a=e.onAddNewTable,s=e.onEditBoard,r=e.getTaskValue,o=e.removeTable,l=e.onAddNewTask,d=e.onEditTask,u=e.onEditTable,b=e.onRemoveTask,j=e.openConversationModal,p=e.updateWorkspace,m=e.deleteWorkspace,f=Object(i.d)((function(e){return e.workspace.currWorkspace})),O=Object(c.useState)(""),h=Object(fe.a)(O,2),v=h[0],g=h[1];return Object(n.jsxs)("div",{className:"board-content-container",children:[t?Object(n.jsx)("div",{className:"new-workspace-board-header"}):Object(n.jsx)(mt,{workspace:f,onAddNewTable:a,onEditBoard:s,setSearch:g}),t?Object(n.jsx)(Dt,{updateWorkspace:p,deleteWorkspace:m}):Object(n.jsx)(Ft,{isNewWorkspaceCreated:t,workspace:f,getTaskValue:r,removeTable:o,onAddNewTask:l,onEditTask:d,onEditTable:u,onEditBoard:s,onRemoveTask:b,openConversationModal:j,search:v})]})}a(396);function Wt(e){var t=e.onEditTask,a=e.isOpenConversationModal,s=Object(i.d)((function(e){return e.user.users})),r=Object(i.d)((function(e){return e.workspace.currBoard})),o=Object(i.d)((function(e){return e.workspace.conversationLocation})),l=Object(i.d)((function(e){return e.user.loggedInUser})),d=Object(c.useState)(null),u=Object(fe.a)(d,2),j=u[0],p=u[1],m=Object(c.useState)(null),O=Object(fe.a)(m,2),h=O[0],v=O[1],g=Object(c.useState)(!1),x=Object(fe.a)(g,2),k=x[0],w=x[1],N=Object(c.useState)(!1),C=Object(fe.a)(N,2),S=C[0],y=C[1],B=Object(c.useState)(""),T=Object(fe.a)(B,2),_=T[0],E=T[1],L=Object(c.useRef)();function A(e){return s.filter((function(t){return t._id===e}))[0]}function F(){if(!(_.trim().length<1)){var e={_id:Date.now(),userId:l._id,msg:_,likes:0,replys:[]},a=Object(b.a)(Object(b.a)({},h),{},{conversations:[].concat(Object(f.a)(h.conversations),[e])});t(j,a),E("")}}Object(c.useEffect)((function(){o.tableId&&p(r.tables.filter((function(e){return e._id===o.tableId}))[0])}),[o.tableId,r]),Object(c.useEffect)((function(){o.taskId&&j&&v(j.tasks.filter((function(e){return e._id===o.taskId}))[0])}),[o.taskId,j]),Object(c.useEffect)((function(){a||E("")}),[a]);var D=[{icon:Object(n.jsx)(Oe.d,{}),name:"Blockquote"},{icon:Object(n.jsx)(Oe.a,{}),name:"Strong"},{icon:Object(n.jsx)(Ae.d,{}),name:"Emphasis <em></em>"},{icon:Object(n.jsx)(Se.c,{}),name:"Text color"},{icon:Object(n.jsx)(Ae.c,{}),name:"Bulleted List "},{icon:Object(n.jsx)(Se.d,{}),name:"Numbered List"},{icon:Object(n.jsx)(Le.n,{}),name:"Text left"},{icon:Object(n.jsx)(Le.o,{}),name:"Text right"}],I=[{icon:Object(n.jsx)(ft.b,{}),name:"Add files"},{icon:"",name:"GIF"},{icon:Object(n.jsx)(he.d,{}),name:"Emoji"},{icon:Object(n.jsx)(yt.b,{}),name:"Mention"}];return Object(n.jsxs)("div",{className:"conversation-modal-content",children:[Object(n.jsx)("div",{className:"conversation-modal-title",children:"Customer Confirms Use Case(s) are Successfully Implemented"}),Object(n.jsx)("div",{className:"conversation-modal-updates",children:"Updates"}),Object(n.jsxs)("div",{className:"updates-section-content",children:[k?Object(n.jsx)("input",{type:"text",placeholder:"Write an update...",className:"conversation-input",onClick:function(){w(!0),setTimeout((function(){L&&L.current&&L.current.focus()}),0)}}):Object(n.jsxs)("div",{className:"new-msg-container",children:[Object(n.jsxs)("div",{className:"textarea-editor-wrapper",children:[Object(n.jsx)("div",{className:"buttons-bar",children:D.map((function(e){return Object(n.jsxs)("div",{className:"editor-btn",children:[e.icon,Object(n.jsx)("span",{className:"label-text arrow-up text-editor-label",children:e.name})]})}))}),Object(n.jsx)("textarea",{name:"",id:"",cols:"30",rows:"10",ref:L,onBlur:function(){return w(!1)},value:_,onChange:function(e){return E(e.target.value)}})]}),Object(n.jsxs)("div",{className:"attachments-bar",children:[I.map((function(e){return Object(n.jsxs)("div",{className:"attachment-btn",children:[e.icon,Object(n.jsx)("span",{children:e.name})]})})),Object(n.jsx)("div",{className:"add-msg-btn",onClick:F,children:"Update"})]})]}),Object(n.jsx)("div",{className:"updates-list",children:h&&h.conversations.length>0?Object(n.jsx)(n.Fragment,{children:h.conversations.map((function(e){return Object(n.jsxs)("div",{className:"conversation-wrapper",children:[Object(n.jsxs)("div",{className:"content-wrapper",children:[Object(n.jsxs)("div",{className:"sender-details",children:[Object(n.jsx)("div",{className:"sender-img",style:{backgroundImage:"url(".concat(A(e.userId).avatar,")")}}),Object(n.jsx)("div",{className:"sender-name",children:A(e.userId).username})]}),Object(n.jsx)("div",{className:"msg",children:e.msg})]}),Object(n.jsxs)("div",{className:"btns-wrapper",children:[Object(n.jsx)("div",{className:"btn-wrapper",children:Object(n.jsxs)("div",{className:"like-btn",children:[Object(n.jsx)(Ae.e,{}),Object(n.jsx)("span",{children:"Like"})]})}),Object(n.jsx)("div",{className:"btn-wrapper",children:Object(n.jsxs)("div",{className:"reply-btn",onClick:function(){return y((function(e){return!e}))},children:[Object(n.jsx)(bt.c,{}),Object(n.jsx)("span",{children:"Reply"})]})})]}),S&&Object(n.jsxs)("div",{className:"reply-wrapper",children:[Object(n.jsx)("div",{className:"user-img",style:{backgroundImage:"url(".concat(l.avatar,")")}}),Object(n.jsxs)("div",{className:"reply-msg-wrapper",children:[Object(n.jsx)("textarea",{name:"",id:"",cols:"30",rows:"4",className:"reply-textarea"}),Object(n.jsxs)("div",{className:"attachments-bar",children:[I.map((function(e){return Object(n.jsxs)("div",{className:"attachment-btn",children:[e.icon,Object(n.jsx)("span",{children:e.name})]})})),Object(n.jsx)("div",{className:"add-msg-btn",onClick:F,children:"Reply"})]})]})]})]})}))}):Object(n.jsx)("span",{className:"no-updates",children:"No updates yet..."})})]})]})}var Ut={getById:function(e,t){return e.filter((function(e){return e.folders.filter((function(e){return e._id===t}))}))[0]},update:function(e,t){return t.map((function(t){return t.folders.map((function(t){return t._id===e._id?e:t}))})),t}};var Mt=a(135),Rt=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={isToolbarMenuClose:!1,workspace:null,isFolderOpen:!1,board:null,folder:null,task:{},isOpenConversationModal:!1,isNewFolderCreated:!1,isNewWorkspaceCreated:!1,toolbarActiveBtn:""},e.focusText=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},e.onEndNewFolderUpdating=function(){e.setState({isNewFolderCreated:!1})},e.onToggleToolbarMenu=function(){e.setState({isToolbarMenuClose:!e.state.isToolbarMenuClose})},e.onGettingCurrentWorkspace=function(t){e.setState({workspace:t},(function(){e.props.updateCurrWorkspace(t),e.setState({isNewWorkspaceCreated:!1})}))},e.isBoardInsideFolder=e.props.match.url.split("/").includes("folders"),e.getCurrFolder=function(){if(e.props.match.url.split("/").includes("folders")){var t=e.props.match.url.split("/")[4];return Ut.getById(e.props.workspaces,t)}},e.getCurrBoard=function(){if(e.props.match.url.split("/").includes("folders")){var t=e.props.match.url.split("/")[4],a=Ut.getById(e.props.workspaces,t),n=e.props.match.params.id,c=ct.getById(e.props.workspaces,n,a);c&&e.setState({board:c},(function(){e.props.history.push("/boards/".concat(c._id))}))}else{var s=e.props.match.params.id,r=ct.getById(e.props.workspaces,s,null);r&&e.setState({board:r},(function(){e.props.history.push("/boards/".concat(r._id))}))}},e.onToggleFolder=function(t){e.setState({isFolderOpen:!e.state.isFolderOpen})},e.onGettingCurrentBoard=function(){var t=Object(C.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({board:a},(function(){e.props.history.push("/boards/".concat(a._id))})),t.next=3,e.props.updateCurrBoard(a);case 3:e.setState({isNewWorkspaceCreated:!1});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onEditBoard=function(t){e.updateBoard(t)},e.onAddNewTable=function(){var t=ct.addTable(e.state.board);e.updateBoard(t)},e.onEditTable=function(t){var a=ct.updateTable(e.state.board,t);e.updateBoard(a)},e.removeTable=function(t){var a=ct.removeTable(t,e.state.board);e.updateBoard(a)},e.onAddNewTask=function(t,a){if(a.split(" ").join("")){var n=ct.addTask(t,e.state.board,a,e.props.loggedInUser);e.updateBoard(n)}},e.onEditTask=function(t,a){var n=ct.updateTask(t,e.state.board,a,e.props.loggedInUser);e.updateBoard(n)},e.onRemoveTask=function(t,a){var n=ct.removeTask(t,a,e.state.board);e.updateBoard(n)},e.editBoard=function(t){e.updateBoard(t)},e.moveFolder=function(t,a){e.removeFolder(a._id);var n=Object(b.a)(Object(b.a)({},t),{},{folders:[].concat(Object(f.a)(t.folders),[a])});e.props.updateWorkspace(n)},e.moveBoard=function(t,a){if(e.state.workspace._id===t._id){var n=ct.removeBoard(e.state.workspace,a._id),c=Object(b.a)(Object(b.a)({},n),{},{boards:[].concat(Object(f.a)(n.boards),[a])});e.setState({workspace:c},(function(){e.props.updateCurrWorkspace(c)})),e.props.updateWorkspace(c)}else{e.removeBoard(a._id);var s=Object(b.a)(Object(b.a)({},t),{},{boards:[].concat(Object(f.a)(t.boards),[a])});e.props.updateWorkspace(s)}},e.moveBoardToFolder=function(t,a,n){var c=ct.removeBoard(e.state.workspace,n._id);e.setState({workspace:c},(function(){e.props.updateWorkspace(c),e.props.updateCurrWorkspace(c)}));var s=Object(b.a)(Object(b.a)({},a),{},{boards:[].concat(Object(f.a)(a.boards),[n])});if(c._id===t._id){var r=ct.updateFolder(c,s);r._id===e.state.workspace._id&&e.setState({workspace:r},(function(){e.props.updateCurrWorkspace(r)})),e.props.updateWorkspace(r)}else{var o=ct.updateFolder(t,s);o._id===e.state.workspace._id&&e.setState({workspace:o},(function(){e.props.updateCurrWorkspace(o)})),e.props.updateWorkspace(o)}},e.removeBoard=function(t){var a=ct.removeBoard(e.state.workspace,t);e.setState({workspace:a},(function(){e.props.updateWorkspace(a),e.props.updateCurrWorkspace(a)}))},e.addNewBoard=function(t){var a=ct.addBoard(e.state.workspace,t);e.setState({workspace:a},(function(){e.props.updateWorkspace(a),e.props.updateCurrWorkspace(a)}))},e.addNewWorkspace=function(t,a,n){var c={name:t,isMain:!1,desc:"description about the workspace",img:n,color:a,owner:e.state.loggedInUser,folders:[],boards:[]};e.props.addWorkspace(c).then((function(t){return e.setState({workspace:t},(function(){e.setState({isNewWorkspaceCreated:!0});var a=Object(b.a)(Object(b.a)({},e.props.loggedInUser),{},{pinnedWorkspaces:[].concat(Object(f.a)(e.props.loggedInUser.pinnedWorkspaces),[t._id])});e.props.updateUser(a)}))}))},e.updateWorkspace=function(t){e.props.updateWorkspace(t),e.setState({workspace:t},(function(){e.props.updateCurrWorkspace(t)}))},e.deleteWorkspace=function(t){e.props.removeWorkspace(t),e.props.workspaces.map((function(t){return t.boards.map((function(a){return!0===a.isLastSeen?e.setState({workspace:t},(function(){e.props.updateCurrWorkspace(t)})):null}))}))},e.addBoardInFolder=function(t,a){var n=ct.addBoardInFolder(e.state.workspace,t,a);e.setState({workspace:n},(function(){e.props.updateWorkspace(n),e.props.updateCurrWorkspace(n)}))},e.addNewFloder=function(){var t=ct.addFolder(e.state.workspace);e.setState({workspace:t},(function(){e.props.updateWorkspace(t),e.props.updateCurrWorkspace(t),e.setState({isNewFolderCreated:!0})}))},e.removeFolder=function(t){var a=ct.removeFolder(e.state.workspace,t);e.setState({workspace:a},(function(){e.props.updateWorkspace(a),e.props.updateCurrWorkspace(a)}))},e.updateFolder=function(t){var a=ct.updateFolder(e.state.workspace,t);e.setState({workspace:a},(function(){e.props.updateWorkspace(a),e.props.updateCurrWorkspace(a)}))},e.openConversationModal=function(){e.setState({isOpenConversationModal:!0})},e.onManageWorkspace=function(){e.setState({isNewWorkspaceCreated:!0})},e.onSetToolbarMenu=function(t){e.setState({toolbarActiveBtn:t})},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=Object(C.a)(N.a.mark((function e(){var t=this;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadWorkspaces();case 2:return this.editableName=s.a.createRef(),e.next=5,this.props.workspaces.map((function(e){return e.boards.map((function(a){return!0===a.isLastSeen?t.setState({board:a},(function(){t.props.history.push("/boards/".concat(a._id)),t.props.updateCurrBoard(a),t.setState({workspace:e}),t.props.updateCurrWorkspace(e)})):null}))}))[0];case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateBoard",value:function(e){var t=this;this.setState({board:e},(function(){t.props.updateCurrBoard(e);var a=t.state.workspace,n={isBoardInsideFolder:!1,cuurFolde:null};a.folders.map((function(t){return t.boards.map((function(a){return a._id===e._id?n=Object(b.a)(Object(b.a)({},n),{},{isBoardInsideFolder:!0,cuurFolde:t}):null}))})),n.isBoardInsideFolder?a=Object(b.a)(Object(b.a)({},t.state.workspace),{},{folders:t.state.workspace.folders.map((function(t){return t._id===n.cuurFolde._id?Object(b.a)(Object(b.a)({},t),{},{boards:t.boards.map((function(t){return t._id===e._id?e:t}))}):t}))}):a.boards=a.boards.map((function(t){return t._id===e._id?e:t})),t.props.updateCurrWorkspace(a),t.setState({workspace:a},(function(){t.props.updateWorkspace(a)}))}))}},{key:"render",value:function(){var e=this,t=this.props.workspaces,a=this.state,c=a.workspace,s=a.board,r=a.isNewWorkspaceCreated;return t&&s&&c?Object(n.jsxs)("div",{className:"board-page-container",children:[Object(n.jsx)(Ee,{BsLightning:Le.g,BsStar:Le.m,BsThreeDots:Le.p,onGettingCurrentWorkspace:this.onGettingCurrentWorkspace,addNewWorkspace:this.addNewWorkspace,onSetToolbarMenu:this.onSetToolbarMenu}),Object(n.jsx)(ot,{isToolbarMenuClose:this.state.isToolbarMenuClose,onToggleToolbarMenu:this.onToggleToolbarMenu,IoIosArrowForward:Ne.d,IoIosArrowBack:Ne.b,workspace:c,onToggleFolder:this.onToggleFolder,isFolderOpen:this.state.isFolderOpen,IoMdArrowDropdown:Ne.f,CgViewComfortable:Qe.c,onGettingCurrentBoard:this.onGettingCurrentBoard,onGettingCurrentBoardInWorkspace:this.onGettingCurrentBoardInWorkspace,addNewBoard:this.addNewBoard,addNewFloder:this.addNewFloder,addBoardInFolder:this.addBoardInFolder,removeFolder:this.removeFolder,updateFolder:this.updateFolder,removeBoard:this.removeBoard,editBoard:this.editBoard,moveFolder:this.moveFolder,moveBoard:this.moveBoard,moveBoardToFolder:this.moveBoardToFolder,isNewFolderCreated:this.state.isNewFolderCreated,onEndNewFolderUpdating:this.onEndNewFolderUpdating,updateWorkspace:this.updateWorkspace,deleteWorkspace:this.deleteWorkspace,onGettingCurrentWorkspace:this.onGettingCurrentWorkspace,onManageWorkspace:this.onManageWorkspace,toolbarActiveBtn:this.state.toolbarActiveBtn}),Object(n.jsx)(It,{isNewWorkspaceCreated:r,onAddNewTable:this.onAddNewTable,onEditBoard:this.onEditBoard,getTaskValue:this.getTaskValue,removeTable:this.removeTable,onAddNewTask:this.onAddNewTask,onEditTask:this.onEditTask,onEditTable:this.onEditTable,onRemoveTask:this.onRemoveTask,openConversationModal:this.openConversationModal,updateWorkspace:this.updateWorkspace,deleteWorkspace:this.deleteWorkspace}),Object(n.jsx)("div",{className:"conversation-modal-wrapper ".concat(this.state.isOpenConversationModal?"":"hide"),children:Object(n.jsxs)("div",{className:"conversation-modal ".concat(this.state.isOpenConversationModal?" slide-left":"slide-right"),children:[Object(n.jsx)(Mt.a,{className:"conversation-close-btn",onClick:function(){e.setState({isOpenConversationModal:!1})}}),Object(n.jsx)(Wt,{isOpenConversationModal:this.state.isOpenConversationModal,onEditTask:this.onEditTask})]})})]}):Object(n.jsx)("div",{children:"Loading...."})}}]),a}(c.Component),Pt={loadWorkspaces:Me,updateWorkspace:Re,updateCurrWorkspace:Pe,getCurrBoard:function(e){return function(){var t=Object(C.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"SET_BOARD",board:e})}catch(n){console.log("WorkspaceActions: err in SET_BOARD",n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateCurrBoard:Ke,addWorkspace:function(e){return function(){var t=Object(C.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Fe.add(e);case 3:return n=t.sent,a({type:"ADD_WORKSPACE",workspace:n}),t.abrupt("return",n);case 8:t.prev=8,t.t0=t.catch(0),console.log("WorkspaceActions: err in addWorkspace",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},removeWorkspace:function(e){return function(){var t=Object(C.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Fe.remove(e);case 3:a({type:"REMOVE_WORKSPACE",workspaceId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("WorkspaceActions: err in removeWorkspace",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},updateUser:$},Gt=Object(i.b)((function(e){return{workspaces:e.workspace.workspaces,workspace:e.workspace.currWorkspace,board:e.workspace.currBoard,loggedInUser:e.user.loggedInUser}}),Pt)(Rt),Kt={uploadImg:function(e){return Vt.apply(this,arguments)}};function Vt(){return(Vt=Object(C.a)(N.a.mark((function e(t){var a,n,c,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"dzvebcsrp",a="https://api.cloudinary.com/v1_1/".concat("dzvebcsrp","/image/upload"),(n=new FormData).append("file",t.target.files[0]),n.append("upload_preset","mister_toy"),e.prev=5,e.next=8,fetch(a,{method:"POST",body:n});case 8:return c=e.sent,e.next=11,c.json();case 11:return s=e.sent,e.abrupt("return",s);case 15:e.prev=15,e.t0=e.catch(5),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}function Ht(e){var t=e.itemName,a=Object(i.d)((function(e){return e.user.loggedInUser})),s=Object(c.useState)("logo"===t?"https://res.cloudinary.com/dzvebcsrp/image/upload/v1616327732/logo_xw7dyu.ico":a.avatar),r=Object(fe.a)(s,2),o=r[0],l=r[1],d=Object(i.c)();Object(c.useEffect)((function(){"logo"===t&&a&&a.logoImg&&l(a.logoImg),"user"===t&&a&&a.avatar&&l(a.avatar)}),[a,t]);var u=function(){var e=Object(C.a)(N.a.mark((function e(n){var c,s,r,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,Kt.uploadImg(n);case 3:c=e.sent,(s=c.secure_url)&&(l(s),"logo"===t&&(r=Object(b.a)(Object(b.a)({},a),{},{logoImg:s}),d($(r))),"user"===t&&(o=Object(b.a)(Object(b.a)({},a),{},{avatar:s}),d($(o))));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("form",{children:Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{onChange:u,type:"file"}),Object(n.jsx)("div",{style:{backgroundImage:"url(".concat(o,")")},children:"user"===t&&Object(n.jsxs)("div",{className:"before",children:[Object(n.jsx)(ut.b,{className:"update-img-icon"}),Object(n.jsx)("div",{className:"text",children:"Change profile picture"})]})})]})})}var zt=[{path:"/",component:pe},{path:"/about",component:me},{path:"/boards",component:Gt},{path:"/boards/:id",component:Gt},{path:"/users/:id",component:function(){var e=Object(i.d)((function(e){return e.user.loggedInUser})),t=Object(c.useState)(e.username),a=Object(fe.a)(t,2),s=a[0],r=a[1],o=Object(c.useState)(!1),l=Object(fe.a)(o,2),d=l[0],u=l[1],j=Object(i.c)(),p=Object(c.useRef)();Object(c.useEffect)((function(){r(e.username)}),[e]);var m=[Object(n.jsx)(bt.d,{className:"icon"}),Object(n.jsx)(at.c,{className:"icon"}),Object(n.jsx)(bt.b,{className:"icon"}),Object(n.jsx)(Ae.b,{className:"icon"}),Object(n.jsx)(ke.d,{className:"icon"}),Object(n.jsx)(he.e,{className:"icon"}),Object(n.jsx)(Ae.a,{className:"icon"}),Object(n.jsx)(he.a,{className:"icon"})],f=["Professional Engineer of something","".concat(e.email),"Add a phone number","Add a Skype number","Dallas, TX","Jerusalem","Every day \ud83c\udf89","Add a work anniversary"];return Object(n.jsxs)("div",{className:"user-details",children:[Object(n.jsxs)("div",{className:"details-header",children:[Object(n.jsx)("div",{className:"upload-img-wrapper",children:Object(n.jsx)(Ht,{itemName:"user"})}),Object(n.jsx)("div",{className:"updating-user-name-wrapper",children:d?Object(n.jsx)("input",{className:"update-name",ref:p,type:"text",value:s,onChange:function(e){return r(e.target.value)},onBlur:function(){!function(){if(e.username!==s){var t=Object(b.a)(Object(b.a)({},e),{},{username:s});j($(t))}}(),u(!1)},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}}):Object(n.jsxs)("div",{className:"user-name",onClick:function(){u(!0),setTimeout((function(){p&&p.current&&p.current.focus()}),0)},children:[Object(n.jsx)("div",{children:s}),Object(n.jsx)(Le.h,{className:"BsPencil"}),Object(n.jsx)("span",{className:"label-text edit-name",children:"Edit name"})]})}),Object(n.jsx)("div",{className:"header-navigation",children:["Personal Info","Working Status","Password","Preferences","Notifications","Email Integration","Sessions"].map((function(e){return Object(n.jsx)("div",{className:"title",children:e})}))})]}),Object(n.jsx)("div",{className:"details-main",children:Object(n.jsxs)("div",{className:"details-main-content-wrapper",children:[Object(n.jsx)("div",{className:"title",children:"Overview"}),["Title","Email","Phone","Skype","Location","Timezone","Birthday","Work Anniversary"].map((function(e,t){return Object(n.jsxs)("div",{className:"overview-row-container",children:[Object(n.jsx)("div",{className:"icon-wrapper",children:m[t]}),Object(n.jsxs)("div",{className:"user-info-wrapper",children:[Object(n.jsxs)("div",{children:[e,":"]}),Object(n.jsx)("div",{children:f[t]})]})]})}))]})})]})}}];function Jt(){var e=Object(c.useState)(!1),t=Object(fe.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(null),o=Object(fe.a)(r,2),d=o[0],u=o[1],b=Object(i.d)((function(e){return e.user.loggedInUser})),j=Object(i.c)(),p=Object(k.f)();return Object(c.useEffect)((function(){setTimeout((function(){window.location.hash.includes("boards")&&u("workspaces")}),0)}),[]),Object(n.jsxs)("div",{className:"navbar-section",children:[Object(n.jsxs)("div",{className:"navbar-first-area",children:[Object(n.jsx)("div",{className:"logo upload-img-wrapper",children:Object(n.jsx)(Ht,{itemName:"logo"})}),Object(n.jsx)(l.b,{to:"/boards",children:Object(n.jsxs)("div",{className:"icon-wrapper ".concat("workspaces"===d?"selected":""),onClick:function(){u("workspaces")},children:[Object(n.jsx)(Le.f,{className:"navbar-icon"}),Object(n.jsx)("span",{className:"label-text",children:"Wrokspaces"})]})}),Object(n.jsxs)("div",{className:"icon-wrapper ".concat("notifications"===d?"selected":""),onClick:function(){u("notifications")},children:[Object(n.jsx)(Ne.j,{className:"navbar-icon"}),Object(n.jsx)("span",{className:"label-text",children:"Notifications"})]}),Object(n.jsxs)("div",{className:"icon-wrapper ".concat("downloads"===d?"selected":""),onClick:function(){u("downloads")},children:[Object(n.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(n.jsxs)("g",{clipPath:"url(#a)",children:[Object(n.jsx)("path",{d:"M11.443 6.365L8.071 9.739m0 0L4.699 6.366M8.07 9.738V.667",stroke:"rgb(233, 233, 233)",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(n.jsx)("path",{d:"M4.95 11.333l.554-.23a.6.6 0 0 0-.554-.37v.6zm6.1 0v-.6a.6.6 0 0 0-.554.37l.554.23zm-6.1-.6H1.199v1.2h3.75v-1.2zm-3.751 0a1.13 1.13 0 0 0-1.132 1.133h1.2a.07.07 0 0 1-.068.067v-1.2zM.067 11.866v3.145h1.2v-3.145h-1.2zm0 3.145a1.13 1.13 0 0 0 1.132 1.132v-1.2a.07.07 0 0 1 .068.068h-1.2zm1.132 1.132H14.8v-1.2H1.199v1.2zm13.602 0a1.13 1.13 0 0 0 1.132-1.132h-1.2a.07.07 0 0 1 .068-.068v1.2zm1.132-1.132v-3.145h-1.2v3.145h1.2zm0-3.145a1.13 1.13 0 0 0-1.132-1.133v1.2a.07.07 0 0 1-.068-.067h1.2zm-1.132-1.133H11.05v1.2H14.8v-1.2zm-4.305.37c-.408.98-1.349 1.63-2.496 1.63v1.2c1.627 0 3.008-.938 3.604-2.369l-1.108-.461zM8 12.733c-1.147 0-2.089-.65-2.496-1.63l-1.108.461c.596 1.431 1.976 2.37 3.604 2.37v-1.2z",fill:"rgb(233, 233, 233)"})]}),Object(n.jsx)("defs",{children:Object(n.jsx)("clipPath",{id:"a",children:Object(n.jsx)("path",{fill:"#fff",d:"M0 0h16v16H0z"})})})]}),Object(n.jsx)("span",{className:"label-text",children:"text text text"})]})]}),Object(n.jsxs)("div",{className:"navbar-second-area",children:[Object(n.jsxs)("div",{className:"icon-wrapper ".concat("my week"===d?"selected":""),onClick:function(){u("my week")},children:[Object(n.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",children:Object(n.jsx)("path",{d:"M177.23 32.224V7.16a7.16 7.16 0 0 1 14.322 0v25.063h41.175c12.849 0 23.273 10.424 23.273 23.273v80.559a7.16 7.16 0 0 1-14.322 0V94.88H14.322v137.846c0 4.94 4.012 8.951 8.95 8.951h96.672a7.16 7.16 0 0 1 0 14.322H23.273C10.424 256 0 245.576 0 232.727V55.497c0-12.85 10.424-23.273 23.273-23.273h41.175V7.16a7.16 7.16 0 0 1 14.321 0v25.063h98.462zm64.448 48.335V55.497c0-4.94-4.012-8.952-8.95-8.952H23.272c-4.94 0-8.951 4.013-8.951 8.952v25.062h227.356zm2.098 98.77a7.16 7.16 0 0 1 10.127 10.126l-64.448 64.448a7.16 7.16 0 0 1-10.127 0l-32.224-32.224a7.16 7.16 0 0 1 10.127-10.127l27.16 27.16 59.385-59.384z",fill:"rgb(233, 233, 233)",fillRule:"nonzero"})}),Object(n.jsx)("span",{className:"label-text",children:"My Week"})]}),Object(n.jsxs)("div",{className:"icon-wrapper ".concat("add user"===d?"selected":""),onClick:function(){u("add user")},children:[Object(n.jsx)(Ae.i,{className:"navbar-icon"}),Object(n.jsx)("span",{className:"label-text",children:"text text text"})]}),Object(n.jsxs)("div",{className:"icon-wrapper ".concat("search"===d?"selected":""),onClick:function(){u("search")},children:[Object(n.jsx)(Ne.e,{className:"navbar-icon"}),Object(n.jsx)("span",{className:"label-text",children:"text text text"})]}),Object(n.jsxs)("div",{className:"icon-wrapper ".concat("help"===d?"selected":""),onClick:function(){u("help")},children:[Object(n.jsx)("svg",{stroke:"rgb(233, 233, 233)",width:"22",height:"22",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",className:"icon",xmlns:"http://www.w3.org/2000/svg",children:Object(n.jsx)("path",{fill:"none",stroke:"rgb(233, 233, 233)",strokeWidth:"2",d:"M12,23 C12.5522847,23 13,22.5522847 13,22 C13,21.4477153 12.5522847,21 12,21 C11.4477153,21 11,21.4477153 11,22 C11,22.5522847 11.4477153,23 12,23 Z M12,18 L12,15 C12,13 13,13 15,12 C17,11 18,9.15767339 18,7 C18,3.6862915 15.3137085,1 12,1 C8.6862915,1 6,3.6862915 6,7"})}),Object(n.jsx)("span",{className:"label-text",children:"text text text"})]}),Object(n.jsxs)("div",{className:"avatar-image-wrapper",tabIndex:"0",onBlur:function(){s(!1)},children:[Object(n.jsx)("div",{className:"avatar-image-border",onClick:function(){s((function(e){return!e}))},children:b&&Object(n.jsx)("div",{className:"user-avatar",style:{backgroundImage:"url(".concat(b.avatar,")")}})}),a&&Object(n.jsxs)("div",{className:"modal-default-style user-modal-wrapper",children:[Object(n.jsxs)("div",{className:"modal-btn",onClick:function(){p.push("/users/".concat(b._id)),u(null),s(!1)},children:[Object(n.jsx)(Oe.g,{}),Object(n.jsx)("span",{children:"Update Profile"})]}),Object(n.jsxs)("div",{className:"modal-btn",onClick:function(){j(Z()),window.location.assign("/")},children:[Object(n.jsx)(et.b,{}),Object(n.jsx)("span",{children:"Logout"})]})]})]})]})]})}function qt(){var e=Object(i.d)((function(e){return e.user.loggedInUser}));return Object(n.jsxs)("div",{className:"App",children:[e&&Object(n.jsx)(Jt,{}),Object(n.jsx)(k.c,{children:zt.map((function(e){return Object(n.jsx)(k.a,{exact:!0,component:e.component,path:e.path},e.path)}))})]})}a(397);var Xt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,399)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};o.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(i.a,{store:x,children:Object(n.jsx)(l.a,{children:Object(n.jsx)(qt,{})})})}),document.getElementById("root")),Xt()}},[[398,1,2]]]);
//# sourceMappingURL=main.7b9c51e1.chunk.js.map